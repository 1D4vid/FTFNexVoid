local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")
local MaterialService = game:GetService("MaterialService")
local LocalPlayer = Players.LocalPlayer

if not LocalPlayer then
	repeat task.wait() until Players.LocalPlayer
	LocalPlayer = Players.LocalPlayer
end

local isMobile = UserInputService.TouchEnabled
local CurrentKey = Enum.KeyCode.K
local ExecutorName = identifyexecutor and identifyexecutor() or "Unknown"

local LegitSettings = {
	MuteSteps = false,
	MuteJumps = false,
	MuteHack = false
}

local ActiveFeatures = {
    HideLeaves = false,
    EspPlayers = false,
    EspPods = false,
    EspDoors = false,
    EspExits = false,
    EspComputers = false,
    MapMode = nil,
    GrayChars = false
}

local ESP_COLORS = {
	Beast = Color3.fromRGB(255, 0, 0),
	Survivor = Color3.fromRGB(0, 255, 0),
	Border = Color3.fromRGB(255, 255, 255),
	Blue = Color3.fromRGB(0, 170, 255),
	Green = Color3.fromRGB(0, 255, 0),
	Red = Color3.fromRGB(255, 0, 0),
	Exit = Color3.fromRGB(255, 170, 0),
	Door = Color3.fromRGB(255, 255, 0),
	Pod = Color3.fromRGB(0, 255, 255)
}

local Config = {
	MainSize = isMobile and UDim2.new(0, 500, 0, 320) or UDim2.new(0, 600, 0, 400),
	SidebarWidth = isMobile and 130 or 150,
	FooterHeight = 18, 
	BtnHeight = isMobile and 29 or 36, 
	ListPadding = UDim.new(0, 2), 
	FontSize = isMobile and 11 or 13,
	IconSize = isMobile and 14 or 18
}

local ContentConfig = {
	ItemHeight = 40,
	PlayerCardHeight = 50,
	ItemPadding = UDim.new(0, 6)
}

pcall(function()
	if LocalPlayer.PlayerGui:FindFirstChild("NexVoidHub") then
		LocalPlayer.PlayerGui.NexVoidHub:Destroy()
	end
end)

local Theme = {
	FrameColor = Color3.fromRGB(15, 15, 15), 
	ContentColor = Color3.fromRGB(20, 20, 20), 
	ItemColor = Color3.fromRGB(26, 26, 26), 
	ItemStroke = Color3.fromRGB(45, 45, 45), 
	SwitchOff = Color3.fromRGB(10, 10, 10), 
	Accent = Color3.fromRGB(0, 190, 255), 
	Text = Color3.fromRGB(255, 255, 255), 
	TextDark = Color3.fromRGB(120, 120, 120),
	Font = Enum.Font.GothamBold,
	CloseRed = Color3.fromRGB(255, 60, 60)
}

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NexVoidHub"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.IgnoreGuiInset = true
-- CORREÇÃO: Sobrepor tudo (Chat, Lista de Players, etc)
ScreenGui.DisplayOrder = 10000 

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = Config.MainSize
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.Position = UDim2.new(0.5, 0, 0.6, 0)
MainFrame.BackgroundColor3 = Theme.FrameColor
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = false
MainFrame.ClipsDescendants = true
MainFrame.Visible = true
MainFrame.Parent = ScreenGui

local CurrentCursorSize = 24
local PCCursorActive = false
local MobileCrosshair = Instance.new("ImageLabel"); MobileCrosshair.Name = "MobileCrosshair"; MobileCrosshair.Size = UDim2.new(0, CurrentCursorSize, 0, CurrentCursorSize); MobileCrosshair.AnchorPoint = Vector2.new(0.5, 0.5); MobileCrosshair.Position = UDim2.new(0.5, 0, 0.5, 0); MobileCrosshair.BackgroundTransparency = 1; MobileCrosshair.Image = ""; MobileCrosshair.Visible = false; MobileCrosshair.ZIndex = 99; MobileCrosshair.Parent = ScreenGui 
local PCSoftwareCursor = Instance.new("ImageLabel"); PCSoftwareCursor.Name = "PCCursor"; PCSoftwareCursor.Size = UDim2.new(0, CurrentCursorSize, 0, CurrentCursorSize); PCSoftwareCursor.AnchorPoint = Vector2.new(0.5, 0.5); PCSoftwareCursor.BackgroundTransparency = 1; PCSoftwareCursor.Image = ""; PCSoftwareCursor.Visible = false; PCSoftwareCursor.ZIndex = 10000; PCSoftwareCursor.Parent = ScreenGui

local function UpdateCursorSizes(val) 
    CurrentCursorSize = val; 
    MobileCrosshair.Size = UDim2.new(0, val, 0, val); 
    PCSoftwareCursor.Size = UDim2.new(0, val, 0, val) 
end

RunService.RenderStepped:Connect(function() 
    if MainFrame.Visible then
        if UserInputService.MouseIconEnabled == false then UserInputService.MouseIconEnabled = true end
        if PCCursorActive and PCSoftwareCursor.Visible then PCSoftwareCursor.Visible = false end 
    else
        if PCCursorActive then 
            if UserInputService.MouseIconEnabled == true then UserInputService.MouseIconEnabled = false end
            local mousePos = UserInputService:GetMouseLocation(); 
            PCSoftwareCursor.Position = UDim2.new(0, mousePos.X, 0, mousePos.Y)
            if not PCSoftwareCursor.Visible then PCSoftwareCursor.Visible = true end
        else 
            if UserInputService.MouseIconEnabled == false then UserInputService.MouseIconEnabled = true end
            if PCSoftwareCursor.Visible then PCSoftwareCursor.Visible = false end
        end 
    end
end)

local function MakeDraggable(triggerObject, frameObject)
	local dragging = false
	local dragInput, dragStart, startPos

	triggerObject.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = frameObject.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	triggerObject.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - dragStart
			frameObject.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

local ActiveSounds = {
	Running = {ID = nil, Vol = 1.0},
	Jumping = {ID = nil, Vol = 0.5},
	Landing = {ID = nil, Vol = 0.5}
}
local SoundConnections = {}
local OriginalSoundIDs = {}

local function IsLocalSound(soundObj)
	if not LocalPlayer.Character then return false end
	local root = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if root and soundObj.Parent == root then
		return true
	end
	return false
end

local function EnforceSound(soundObj, nameType)
	if SoundConnections[soundObj] then
		for _, c in pairs(SoundConnections[soundObj]) do c:Disconnect() end
		SoundConnections[soundObj] = nil
	end

	if not OriginalSoundIDs[soundObj] then
		OriginalSoundIDs[soundObj] = soundObj.SoundId
	end

	local settings = ActiveSounds[nameType]
	local targetID = settings.ID
	local targetVol = settings.Vol

	if targetID == nil then
		if OriginalSoundIDs[soundObj] then
			soundObj.SoundId = OriginalSoundIDs[soundObj]
		end
		if nameType == "Running" then targetVol = 1.0 else targetVol = 0.5 end
	else
		soundObj.SoundId = "rbxassetid://" .. targetID
	end

	if IsLocalSound(soundObj) then
		if nameType == "Running" and LegitSettings.MuteSteps then
			targetVol = 0
		elseif (nameType == "Jumping" or nameType == "Landing") and LegitSettings.MuteJumps then
			targetVol = 0
		end
	end

	soundObj.Volume = targetVol
	
	local con1 = soundObj:GetPropertyChangedSignal("SoundId"):Connect(function()
		if targetID and soundObj.SoundId ~= "rbxassetid://" .. targetID then 
			soundObj.SoundId = "rbxassetid://" .. targetID 
		end
	end)
	
	local con2 = soundObj:GetPropertyChangedSignal("Volume"):Connect(function()
		local currentTarget = targetVol
		if IsLocalSound(soundObj) then
			if nameType == "Running" and LegitSettings.MuteSteps then
				currentTarget = 0
			elseif (nameType == "Jumping" or nameType == "Landing") and LegitSettings.MuteJumps then
				currentTarget = 0
			end
		end
		if soundObj.Volume ~= currentTarget then 
			soundObj.Volume = currentTarget 
		end
	end)
	
	SoundConnections[soundObj] = {con1, con2}
end

local function ProcessCharacter(char)
	local root = char:WaitForChild("HumanoidRootPart", 10)
	if not root then return end
	local soundNames = {"Running", "Jumping", "Landing"}
	
	for _, name in ipairs(soundNames) do
		task.spawn(function()
			local sound = root:WaitForChild(name, 5)
			if sound and sound:IsA("Sound") then EnforceSound(sound, name) end
		end)
	end
	
	root.ChildAdded:Connect(function(child)
		if child:IsA("Sound") and (child.Name == "Running" or child.Name == "Jumping" or child.Name == "Landing") then
			task.wait()
			EnforceSound(child, child.Name)
		end
	end)
end

Players.PlayerAdded:Connect(function(p)
	p.CharacterAdded:Connect(ProcessCharacter)
	if p.Character then ProcessCharacter(p.Character) end
end)
for _, p in pairs(Players:GetPlayers()) do
	if p.Character then ProcessCharacter(p.Character) end
	p.CharacterAdded:Connect(ProcessCharacter)
end

local function SetSound(Type, ID, Vol)
	if ID == "Default" then
		ActiveSounds[Type].ID = nil
	else 
		ActiveSounds[Type].ID = ID
		ActiveSounds[Type].Vol = Vol 
	end
    for _, p in pairs(Players:GetPlayers()) do if p.Character then ProcessCharacter(p.Character) end end
end

local TopBar = Instance.new("Frame"); TopBar.Size = UDim2.new(1, 0, 0, 40); TopBar.BackgroundColor3 = Theme.FrameColor; TopBar.BorderSizePixel = 0; TopBar.Parent = MainFrame
MakeDraggable(TopBar, MainFrame)

local TitleLabel = Instance.new("TextLabel"); TitleLabel.Name = "TitleLabel"; TitleLabel.Text = "Nex<font color='rgb(0,190,255)'>Void</font>"; TitleLabel.RichText = true; TitleLabel.Size = UDim2.new(0, 200, 1, 0); TitleLabel.BackgroundTransparency = 1; TitleLabel.Font = Theme.Font; TitleLabel.TextSize = 18; TitleLabel.TextColor3 = Theme.Text; TitleLabel.TextXAlignment = Enum.TextXAlignment.Left; TitleLabel.Position = UDim2.new(0, 45, 0, 0); TitleLabel.Parent = TopBar
local LogoIcon = Instance.new("ImageLabel"); LogoIcon.Image = "rbxassetid://124956767763560"; LogoIcon.Size = UDim2.new(0, 20, 0, 20); LogoIcon.Position = UDim2.new(0, 15, 0.5, -10); LogoIcon.BackgroundTransparency = 1; LogoIcon.ScaleType = Enum.ScaleType.Fit; LogoIcon.ImageColor3 = Theme.Accent; LogoIcon.Parent = TopBar
local OpenButton = Instance.new("ImageButton"); OpenButton.Name = "OpenButton"; OpenButton.Size = UDim2.new(0, 50, 0, 50); OpenButton.Position = UDim2.new(0, 30, 0.4, 0); OpenButton.BackgroundColor3 = Theme.FrameColor; OpenButton.Image = "rbxassetid://112262395405082"; OpenButton.Visible = false; OpenButton.Active = true; OpenButton.Draggable = false; OpenButton.Parent = ScreenGui; Instance.new("UICorner", OpenButton).CornerRadius = UDim.new(0, 14); local OBS = Instance.new("UIStroke"); OBS.Color = Theme.Accent; OBS.Thickness = 1.5; OBS.Parent = OpenButton
MakeDraggable(OpenButton, OpenButton)

local function createTopBtn(name, icon, offsetOrder, isImage)
	local Btn
	if isImage then
		Btn = Instance.new("ImageButton"); Btn.Image = "rbxassetid://" .. icon; Btn.ScaleType = Enum.ScaleType.Fit; local iconSize = (name == "Search") and 22 or 16; Btn.ImageTransparency = 1; local Inner = Instance.new("ImageLabel"); Inner.Size = UDim2.new(0, iconSize, 0, iconSize); Inner.Position = UDim2.new(0.5, -(iconSize/2), 0.5, -(iconSize/2)); Inner.BackgroundTransparency = 1; Inner.Image = "rbxassetid://" .. icon; Inner.ImageColor3 = Theme.TextDark; Inner.ScaleType = Enum.ScaleType.Fit; Inner.Parent = Btn; Btn.MouseEnter:Connect(function() Inner.ImageColor3 = Theme.Accent end); Btn.MouseLeave:Connect(function() Inner.ImageColor3 = Theme.TextDark end)
	else
		Btn = Instance.new("TextButton"); Btn.Text = icon; Btn.Font = Enum.Font.GothamBlack; Btn.TextSize = 16; Btn.TextColor3 = Theme.TextDark; if icon == "-" then Btn.Text = ""; local Line = Instance.new("Frame"); Line.Size = UDim2.new(0, 12, 0, 2); Line.Position = UDim2.new(0.5, -6, 0.5, 0); Line.BackgroundColor3 = Theme.TextDark; Line.BorderSizePixel = 0; Line.Parent = Btn; Btn.MouseEnter:Connect(function() Line.BackgroundColor3 = Theme.Accent end); Btn.MouseLeave:Connect(function() Line.BackgroundColor3 = Theme.TextDark end) else Btn.MouseEnter:Connect(function() Btn.TextColor3 = Theme.CloseRed end); Btn.MouseLeave:Connect(function() Btn.TextColor3 = Theme.TextDark end) end
	end
	Btn.Name = name; Btn.Parent = TopBar; Btn.BackgroundTransparency = 1; Btn.Position = UDim2.new(1, -(40 * offsetOrder), 0, 0); Btn.Size = UDim2.new(0, 40, 1, 0); return Btn
end
local CloseBtn = createTopBtn("Close", "X", 1, false); local MinimizeBtn = createTopBtn("Minimize", "-", 2, false); local SettingsBtn = createTopBtn("Settings", "11293977610", 3, true); local SearchBtn = createTopBtn("Search", "104986431790017", 4, true)

local SearchContainer = Instance.new("Frame"); SearchContainer.Name = "SearchContainer"; SearchContainer.Size = UDim2.new(0, 0, 0, 26); SearchContainer.Position = UDim2.new(1, -165, 0.5, -13); SearchContainer.AnchorPoint = Vector2.new(1, 0); SearchContainer.BackgroundColor3 = Theme.ContentColor; SearchContainer.BorderSizePixel = 0; SearchContainer.ClipsDescendants = true; SearchContainer.Parent = TopBar; Instance.new("UICorner", SearchContainer).CornerRadius = UDim.new(0, 4)
local SearchBox = Instance.new("TextBox"); SearchBox.Size = UDim2.new(1, -10, 1, 0); SearchBox.Position = UDim2.new(0, 10, 0, 0); SearchBox.BackgroundTransparency = 1; SearchBox.Text = ""; SearchBox.PlaceholderText = "Search..."; SearchBox.TextColor3 = Theme.Text; SearchBox.PlaceholderColor3 = Theme.TextDark; SearchBox.Font = Theme.Font; SearchBox.TextSize = 12; SearchBox.TextXAlignment = Enum.TextXAlignment.Left; SearchBox.ClearTextOnFocus = false; SearchBox.Parent = SearchContainer
local CenterContainer = Instance.new("Frame"); CenterContainer.Name = "CenterContainer"; CenterContainer.Size = UDim2.new(1, 0, 1, -(40 + Config.FooterHeight)); CenterContainer.Position = UDim2.new(0, 0, 0, 40); CenterContainer.BackgroundTransparency = 1; CenterContainer.Parent = MainFrame
local Sidebar = Instance.new("Frame"); Sidebar.Name = "Sidebar"; Sidebar.Size = UDim2.new(0, Config.SidebarWidth, 1, 0); Sidebar.BackgroundColor3 = Theme.FrameColor; Sidebar.BorderSizePixel = 0; Sidebar.Parent = CenterContainer
local SidebarList = Instance.new("UIListLayout"); SidebarList.Padding = Config.ListPadding; SidebarList.SortOrder = Enum.SortOrder.LayoutOrder; SidebarList.Parent = Sidebar
local SidebarPadding = Instance.new("UIPadding"); SidebarPadding.PaddingTop = UDim.new(0, 5); SidebarPadding.Parent = Sidebar
local ContentArea = Instance.new("Frame"); ContentArea.Name = "ContentArea"; ContentArea.Size = UDim2.new(1, -Config.SidebarWidth, 1, 0); ContentArea.Position = UDim2.new(0, Config.SidebarWidth, 0, 0); ContentArea.BackgroundColor3 = Theme.ContentColor; ContentArea.BorderSizePixel = 0; ContentArea.Parent = CenterContainer
local BottomBar = Instance.new("Frame"); BottomBar.Size = UDim2.new(1, 0, 0, Config.FooterHeight); BottomBar.Position = UDim2.new(0, 0, 1, -Config.FooterHeight); BottomBar.BackgroundColor3 = Theme.FrameColor; BottomBar.BorderSizePixel = 0; BottomBar.ZIndex = 5; BottomBar.Parent = MainFrame
local StatusText = Instance.new("TextLabel"); StatusText.RichText = true; local modeText = isMobile and "Mobile" or "PC"; 
StatusText.Text = "NexVoid <font color='rgb(0,190,255)'>" .. modeText .. "</font> | Created By DraxynSoulx (Fixed)"; 
StatusText.Size = UDim2.new(1, -5, 1, 0); StatusText.BackgroundTransparency = 1; StatusText.TextColor3 = Theme.Text; StatusText.Font = Theme.Font; StatusText.TextSize = 10; StatusText.TextXAlignment = Enum.TextXAlignment.Right; StatusText.ZIndex = 6; StatusText.Parent = BottomBar

local ModalOverlay = Instance.new("Frame"); ModalOverlay.Size = UDim2.new(1, 0, 1, 0); ModalOverlay.BackgroundColor3 = Color3.new(0,0,0); ModalOverlay.BackgroundTransparency = 0.5; ModalOverlay.Visible = false; ModalOverlay.ZIndex = 10; ModalOverlay.Parent = MainFrame
local function createModalBox(height) local Box = Instance.new("Frame"); Box.Size = UDim2.new(0, 280, 0, height); Box.AnchorPoint = Vector2.new(0.5, 0.5); Box.Position = UDim2.new(0.5, 0, 0.5, 0); Box.BackgroundColor3 = Theme.FrameColor; Box.BorderSizePixel = 0; Box.ZIndex = 11; Box.Visible = false; Box.Parent = ModalOverlay; local TopLine = Instance.new("Frame"); TopLine.Size = UDim2.new(1, 0, 0, 2); TopLine.BackgroundColor3 = Theme.Accent; TopLine.BorderSizePixel = 0; TopLine.ZIndex = 12; TopLine.Parent = Box; return Box end
local ExitBox = createModalBox(120); local YesBtn = Instance.new("TextButton"); YesBtn.Parent = ExitBox; YesBtn.Size = UDim2.new(0, 90, 0, 30); YesBtn.Position = UDim2.new(0, 20, 0, 75); YesBtn.Text = "Exit"; YesBtn.BackgroundColor3 = Theme.CloseRed; YesBtn.TextColor3 = Color3.new(1,1,1); Instance.new("UICorner", YesBtn).CornerRadius = UDim.new(0, 4)
local NoBtn = Instance.new("TextButton"); NoBtn.Parent = ExitBox; NoBtn.Size = UDim2.new(0, 90, 0, 30); NoBtn.Position = UDim2.new(1, -110, 0, 75); NoBtn.Text = "Cancel"; NoBtn.BackgroundColor3 = Theme.ContentColor; NoBtn.TextColor3 = Theme.TextDark; Instance.new("UICorner", NoBtn).CornerRadius = UDim.new(0, 4)
local ExitTitle = Instance.new("TextLabel"); ExitTitle.Parent = ExitBox; ExitTitle.Text = "CONFIRMATION"; ExitTitle.Font = Theme.Font; ExitTitle.TextSize = 14; ExitTitle.TextColor3 = Theme.Accent; ExitTitle.Size = UDim2.new(1, 0, 0, 35); ExitTitle.BackgroundTransparency = 1
local ExitDesc = Instance.new("TextLabel"); ExitDesc.Parent = ExitBox; ExitDesc.Text = "Exit the Script?"; ExitDesc.Font = Enum.Font.Gotham; ExitDesc.TextSize = 14; ExitDesc.TextColor3 = Theme.Text; ExitDesc.Size = UDim2.new(1, 0, 0, 30); ExitDesc.Position = UDim2.new(0, 0, 0, 35); ExitDesc.BackgroundTransparency = 1

local SettingsBox = createModalBox(220)
local SetTitle = Instance.new("TextLabel"); SetTitle.Parent = SettingsBox; SetTitle.Text = "SETTINGS"; SetTitle.Size = UDim2.new(1,0,0,35); SetTitle.TextColor3 = Theme.Accent; SetTitle.BackgroundTransparency = 1; SetTitle.Font = Theme.Font; SetTitle.TextSize = 14

local GameNameLbl = Instance.new("TextLabel")
GameNameLbl.Text = "Game Name: Flee the Facility"
GameNameLbl.Size = UDim2.new(1, -20, 0, 20)
GameNameLbl.Position = UDim2.new(0, 15, 0, 40)
GameNameLbl.BackgroundTransparency = 1
GameNameLbl.TextColor3 = Theme.Text
GameNameLbl.Font = Enum.Font.Gotham
GameNameLbl.TextSize = 12
GameNameLbl.TextXAlignment = Enum.TextXAlignment.Left
GameNameLbl.Parent = SettingsBox

local ExecLbl = Instance.new("TextLabel")
ExecLbl.Text = "Executor: " .. ExecutorName
ExecLbl.Size = UDim2.new(1, -20, 0, 20)
ExecLbl.Position = UDim2.new(0, 15, 0, 60)
ExecLbl.BackgroundTransparency = 1
ExecLbl.TextColor3 = Theme.Text
ExecLbl.Font = Enum.Font.Gotham
ExecLbl.TextSize = 12
ExecLbl.TextXAlignment = Enum.TextXAlignment.Left
ExecLbl.Parent = SettingsBox

local CreatorLbl = Instance.new("TextLabel")
CreatorLbl.Text = "Creator Name: DraxynSoulx"
CreatorLbl.Size = UDim2.new(1, -20, 0, 20)
CreatorLbl.Position = UDim2.new(0, 15, 0, 80)
CreatorLbl.BackgroundTransparency = 1
CreatorLbl.TextColor3 = Theme.Accent 
CreatorLbl.Font = Enum.Font.GothamBold
CreatorLbl.TextSize = 12
CreatorLbl.TextXAlignment = Enum.TextXAlignment.Left
CreatorLbl.Parent = SettingsBox

local KeyLabel = Instance.new("TextLabel"); KeyLabel.Text = "Menu Key:"; KeyLabel.Font = Enum.Font.Gotham; KeyLabel.TextSize = 12; KeyLabel.TextColor3 = Theme.Text; KeyLabel.Size = UDim2.new(0, 100, 0, 30); KeyLabel.Position = UDim2.new(0, 15, 0, 120); KeyLabel.BackgroundTransparency = 1; KeyLabel.TextXAlignment = Enum.TextXAlignment.Left; KeyLabel.ZIndex = 12; KeyLabel.Parent = SettingsBox
local KeyBtn = Instance.new("TextButton"); KeyBtn.Parent = SettingsBox; KeyBtn.Text = CurrentKey.Name; KeyBtn.Size = UDim2.new(0, 80, 0, 26); KeyBtn.Position = UDim2.new(1, -100, 0, 122); KeyBtn.BackgroundColor3 = Theme.ContentColor; KeyBtn.TextColor3 = Theme.Accent; Instance.new("UICorner", KeyBtn).CornerRadius = UDim.new(0, 4)

local CloseSetBtn = Instance.new("TextButton"); CloseSetBtn.Parent = SettingsBox; CloseSetBtn.Text = "Close"; CloseSetBtn.Size = UDim2.new(0, 240, 0, 30); CloseSetBtn.Position = UDim2.new(0, 20, 1, -40); CloseSetBtn.BackgroundColor3 = Theme.ContentColor; CloseSetBtn.TextColor3 = Theme.TextDark; Instance.new("UICorner", CloseSetBtn).CornerRadius = UDim.new(0, 4)

CloseBtn.MouseButton1Click:Connect(function() ModalOverlay.Visible = true; ExitBox.Visible = true; SettingsBox.Visible = false end)
SettingsBtn.MouseButton1Click:Connect(function() ModalOverlay.Visible = true; SettingsBox.Visible = true; ExitBox.Visible = false end)
CloseSetBtn.MouseButton1Click:Connect(function() ModalOverlay.Visible = false; SettingsBox.Visible = false end)
NoBtn.MouseButton1Click:Connect(function() ModalOverlay.Visible = false; ExitBox.Visible = false end)
YesBtn.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)
KeyBtn.MouseButton1Click:Connect(function() KeyBtn.Text = "..."; local input = UserInputService.InputBegan:Wait(); if input.KeyCode ~= Enum.KeyCode.Unknown then CurrentKey = input.KeyCode; KeyBtn.Text = CurrentKey.Name end end)

local isSearching = false
SearchBtn.MouseButton1Click:Connect(function()
	isSearching = not isSearching
	if isSearching then SearchContainer:TweenSize(UDim2.new(0, 150, 0, 26), "Out", "Quad", 0.3, true); task.wait(0.1); SearchBox:CaptureFocus() 
	else SearchContainer:TweenSize(UDim2.new(0, 0, 0, 26), "Out", "Quad", 0.3, true); SearchBox:ReleaseFocus(); SearchBox.Text = ""
		for _, p in pairs(ContentArea:GetChildren()) do if p:IsA("ScrollingFrame") then for _, i in pairs(p:GetDescendants()) do if i:IsA("GuiObject") then i.Visible = true end end end end
	end
end)
SearchBox:GetPropertyChangedSignal("Text"):Connect(function()
	local text = SearchBox.Text:lower()
	for _, page in pairs(ContentArea:GetChildren()) do if page:IsA("ScrollingFrame") then
		for _, item in pairs(page:GetChildren()) do
			if item:IsA("Frame") or item:IsA("TextButton") then
				local lbl = item:FindFirstChildWhichIsA("TextLabel") or (item:IsA("TextButton") and item) or nil
				local txt = (lbl and lbl.Text or ""):lower()
				if txt:find(text) then item.Visible = true else if text ~= "" then item.Visible = false end end
			end
		end
	end end
end)

UserInputService.InputBegan:Connect(function(input, gp)
	if not gp and input.KeyCode == CurrentKey then
		MainFrame.Visible = not MainFrame.Visible
		OpenButton.Visible = false 
	end
end)

MinimizeBtn.MouseButton1Click:Connect(function() MainFrame.Visible = false; OpenButton.Visible = true end)
OpenButton.MouseButton1Click:Connect(function() MainFrame.Visible = true; OpenButton.Visible = false end)

local Library = {}
local tabs = {}

function createSidebarButton(iconId, name)
	local Page = Instance.new("ScrollingFrame"); Page.Name = name .. "Page"
	Page.Size = UDim2.new(1, -20, 1, -10); Page.Position = UDim2.new(0, 10, 0, 5)
	Page.BackgroundTransparency = 1; Page.BorderSizePixel = 0
	Page.ScrollBarThickness = 2; Page.ScrollBarImageColor3 = Theme.Accent
	Page.ScrollBarImageTransparency = 0 
	Page.CanvasSize = UDim2.new(0, 0, 0, 0); Page.AutomaticCanvasSize = Enum.AutomaticSize.Y; Page.ScrollingDirection = Enum.ScrollingDirection.Y
	Page.Visible = false; Page.Parent = ContentArea
	local PL = Instance.new("UIListLayout"); PL.Padding = ContentConfig.ItemPadding; PL.SortOrder = Enum.SortOrder.LayoutOrder; PL.Parent = Page
	local PP = Instance.new("UIPadding"); PP.PaddingBottom = UDim.new(0, 10); PP.Parent = Page
	local TabButton = Instance.new("TextButton"); TabButton.Size = UDim2.new(1, 0, 0, Config.BtnHeight); TabButton.BackgroundTransparency = 1; TabButton.Text = ""; TabButton.Parent = Sidebar
	local Indicator = Instance.new("Frame"); Indicator.Size = UDim2.new(0, 3, 0.7, 0); Indicator.Position = UDim2.new(0, 0, 0.15, 0); Indicator.BackgroundColor3 = Theme.Accent; Indicator.BackgroundTransparency = 1; Indicator.BorderSizePixel = 0; Indicator.Parent = TabButton
	local Icon = Instance.new("ImageLabel"); Icon.Image = "rbxassetid://" .. iconId; Icon.Size = UDim2.new(0, Config.IconSize, 0, Config.IconSize); Icon.Position = UDim2.new(0, 12, 0.5, -(Config.IconSize/2)); Icon.BackgroundTransparency = 1; Icon.ScaleType = Enum.ScaleType.Fit; Icon.ImageColor3 = Theme.TextDark; Icon.Parent = TabButton
	local Label = Instance.new("TextLabel"); Label.Text = name; Label.Size = UDim2.new(0, 100, 1, 0); Label.Position = UDim2.new(0, 38, 0, 0); Label.BackgroundTransparency = 1; Label.Font = Theme.Font; Label.TextSize = Config.FontSize; Label.TextColor3 = Theme.TextDark; Label.TextXAlignment = Enum.TextXAlignment.Left; Label.Parent = TabButton
	TabButton.MouseButton1Click:Connect(function()
		for _, tab in pairs(tabs) do tab.Page.Visible = false; tab.Indicator.BackgroundTransparency = 1; tab.Label.TextColor3 = Theme.TextDark; tab.Icon.ImageColor3 = Theme.TextDark end
		Page.Visible = true; Indicator.BackgroundTransparency = 0; Label.TextColor3 = Theme.Accent; Icon.ImageColor3 = Theme.Accent
	end)
	table.insert(tabs, {Page = Page, Indicator = Indicator, Label = Label, Icon = Icon})
	return Page
end

function Library:CreateButton(Page, Text, Callback)
	local BtnFrame = Instance.new("TextButton"); BtnFrame.Size = UDim2.new(1, 0, 0, ContentConfig.ItemHeight); BtnFrame.BackgroundColor3 = Theme.ItemColor; BtnFrame.Text = ""; BtnFrame.Parent = Page; Instance.new("UICorner", BtnFrame).CornerRadius = UDim.new(0, 6)
	local Label = Instance.new("TextLabel"); Label.Size = UDim2.new(1, -20, 1, 0); Label.Position = UDim2.new(0, 10, 0, 0); Label.BackgroundTransparency = 1; Label.Text = Text; Label.TextColor3 = Theme.Text; Label.Font = Theme.Font; Label.TextSize = 12; Label.TextXAlignment = Enum.TextXAlignment.Left; Label.Parent = BtnFrame
	BtnFrame.MouseButton1Click:Connect(function() task.spawn(function() pcall(Callback) end) end)
end

function Library:CreateToggle(Page, Text, Default, Callback)
	local Tgl = Instance.new("TextButton"); Tgl.Size = UDim2.new(1, 0, 0, ContentConfig.ItemHeight); Tgl.BackgroundColor3 = Theme.ItemColor; Tgl.Text = ""; Tgl.Parent = Page; Instance.new("UICorner", Tgl).CornerRadius = UDim.new(0, 6)
	local Label = Instance.new("TextLabel"); Label.Size = UDim2.new(0.7, 0, 1, 0); Label.Position = UDim2.new(0, 12, 0, 0); Label.BackgroundTransparency = 1; Label.Text = Text; Label.TextColor3 = Theme.Text; Label.Font = Theme.Font; Label.TextSize = 12; Label.TextXAlignment = Enum.TextXAlignment.Left; Label.Parent = Tgl
	local Bg = Instance.new("Frame"); Bg.Size = UDim2.new(0, 34, 0, 18); Bg.Position = UDim2.new(1, -46, 0.5, -9); Bg.BackgroundColor3 = Theme.SwitchOff; Bg.Parent = Tgl; Instance.new("UICorner", Bg).CornerRadius = UDim.new(1, 0)
	local Cir = Instance.new("Frame"); Cir.Size = UDim2.new(0, 14, 0, 14); Cir.Position = UDim2.new(0, 2, 0.5, -7); Cir.BackgroundColor3 = Color3.fromRGB(150, 150, 150); Cir.Parent = Bg; Instance.new("UICorner", Cir).CornerRadius = UDim.new(1, 0)
	local State = Default or false
	local function Upd()
		if State then TweenService:Create(Bg, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Accent}):Play(); TweenService:Create(Cir, TweenInfo.new(0.2), {Position = UDim2.new(1, -16, 0.5, -7), BackgroundColor3 = Color3.new(1,1,1)}):Play()
		else TweenService:Create(Bg, TweenInfo.new(0.2), {BackgroundColor3 = Theme.SwitchOff}):Play(); TweenService:Create(Cir, TweenInfo.new(0.2), {Position = UDim2.new(0, 2, 0.5, -7), BackgroundColor3 = Color3.fromRGB(150, 150, 150)}):Play() end
		task.spawn(function() pcall(Callback, State) end)
	end
	
	local function Set(val)
		State = val
		if State then TweenService:Create(Bg, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Accent}):Play(); TweenService:Create(Cir, TweenInfo.new(0.2), {Position = UDim2.new(1, -16, 0.5, -7), BackgroundColor3 = Color3.new(1,1,1)}):Play()
		else TweenService:Create(Bg, TweenInfo.new(0.2), {BackgroundColor3 = Theme.SwitchOff}):Play(); TweenService:Create(Cir, TweenInfo.new(0.2), {Position = UDim2.new(0, 2, 0.5, -7), BackgroundColor3 = Color3.fromRGB(150, 150, 150)}):Play() end
	end
	
	Tgl.MouseButton1Click:Connect(function() State = not State; Upd() end); if Default then Upd() end
	return {Set = Set}
end

function Library:CreateSection(Page, Text)
	local Section = Instance.new("Frame"); Section.Size = UDim2.new(1, 0, 0, 20); Section.BackgroundTransparency = 1; Section.Parent = Page
	local Label = Instance.new("TextLabel"); Label.Size = UDim2.new(1, 0, 1, 0); Label.BackgroundTransparency = 1; Label.Text = Text; Label.Font = Enum.Font.GothamBold; Label.TextSize = 11; Label.TextColor3 = Theme.Accent; Label.TextXAlignment = Enum.TextXAlignment.Left; Label.Parent = Section
	local Line = Instance.new("Frame"); Line.Size = UDim2.new(1, -(Label.TextBounds.X + 10), 0, 1); Line.Position = UDim2.new(0, Label.TextBounds.X + 10, 0.5, 0); Line.BackgroundColor3 = Theme.ItemStroke; Line.BorderSizePixel = 0; Line.Parent = Section
end

function Library:CreateSlider(Page, Text, Min, Max, Default, Callback)
	local Frame = Instance.new("Frame"); Frame.Size = UDim2.new(1, 0, 0, 40); Frame.BackgroundColor3 = Theme.ItemColor; Frame.Parent = Page; Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)
	local Label = Instance.new("TextLabel"); Label.Size = UDim2.new(1, -20, 0, 20); Label.Position = UDim2.new(0, 10, 0, 2); Label.BackgroundTransparency = 1; Label.Text = Text; Label.TextColor3 = Theme.Text; Label.Font = Theme.Font; Label.TextSize = 11; Label.TextXAlignment = Enum.TextXAlignment.Left; Label.Parent = Frame
	local ValueLabel = Instance.new("TextLabel"); ValueLabel.Size = UDim2.new(0, 40, 0, 20); ValueLabel.Position = UDim2.new(1, -10, 0, 2); ValueLabel.AnchorPoint = Vector2.new(1, 0); ValueLabel.BackgroundTransparency = 1; ValueLabel.Text = tostring(Default); ValueLabel.TextColor3 = Theme.TextDark; ValueLabel.Font = Theme.Font; ValueLabel.TextSize = 11; ValueLabel.TextXAlignment = Enum.TextXAlignment.Right; ValueLabel.Parent = Frame
	local SliderBar = Instance.new("Frame"); SliderBar.Size = UDim2.new(1, -20, 0, 4); SliderBar.Position = UDim2.new(0, 10, 0, 28); SliderBar.BackgroundColor3 = Theme.SwitchOff; SliderBar.BorderSizePixel = 0; SliderBar.Parent = Frame; Instance.new("UICorner", SliderBar).CornerRadius = UDim.new(1, 0)
	local Fill = Instance.new("Frame"); Fill.Size = UDim2.new((Default - Min) / (Max - Min), 0, 1, 0); Fill.BackgroundColor3 = Theme.Accent; Fill.BorderSizePixel = 0; Fill.Parent = SliderBar; Instance.new("UICorner", Fill).CornerRadius = UDim.new(1, 0)
	local Trigger = Instance.new("TextButton"); Trigger.Size = UDim2.new(1, 0, 1, 0); Trigger.BackgroundTransparency = 1; Trigger.Text = ""; Trigger.Parent = SliderBar
	local dragging = false
	local function Update(input)
		local pos = UDim2.new(math.clamp((input.Position.X - SliderBar.AbsolutePosition.X) / SliderBar.AbsoluteSize.X, 0, 1), 0, 1, 0)
		Fill.Size = pos
		local value = math.floor(Min + ((Max - Min) * pos.X.Scale))
		ValueLabel.Text = tostring(value)
		pcall(Callback, value)
	end
	Trigger.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true; Update(input) end end)
	UserInputService.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false end end)
	UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then Update(input) end end)
end

function Library:CreateCustomIDInput(Page, IsMobile)
	local Container = Instance.new("Frame"); Container.Size = UDim2.new(1, 0, 0, 40); Container.BackgroundColor3 = Theme.ItemColor; Container.Parent = Page; Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 6)
	local TextBox = Instance.new("TextBox"); TextBox.Size = UDim2.new(1, -70, 1, 0); TextBox.Position = UDim2.new(0, 10, 0, 0); TextBox.BackgroundTransparency = 1; TextBox.Text = ""; TextBox.PlaceholderText = "Enter Texture ID..."; TextBox.TextColor3 = Theme.Text; TextBox.PlaceholderColor3 = Theme.TextDark; TextBox.Font = Theme.Font; TextBox.TextSize = 12; TextBox.TextXAlignment = Enum.TextXAlignment.Left; TextBox.Parent = Container
	local ApplyBtn = Instance.new("TextButton"); ApplyBtn.Size = UDim2.new(0, 50, 0, 26); ApplyBtn.Position = UDim2.new(1, -60, 0.5, -13); ApplyBtn.BackgroundColor3 = Theme.Accent; ApplyBtn.Text = "Apply"; ApplyBtn.TextColor3 = Color3.new(1,1,1); ApplyBtn.Font = Theme.Font; ApplyBtn.TextSize = 11; ApplyBtn.Parent = Container; Instance.new("UICorner", ApplyBtn).CornerRadius = UDim.new(0, 4)
	ApplyBtn.MouseButton1Click:Connect(function()
		local id = TextBox.Text
		if id ~= "" then
			local fullID = "rbxassetid://" .. id:gsub("rbxassetid://", "")
			if IsMobile then MobileCrosshair.Image = fullID; MobileCrosshair.Visible = true
			else PCSoftwareCursor.Image = fullID; PCCursorActive = true; PCSoftwareCursor.Visible = true end
		end
	end)
end

function Library:CreateCursorGrid(Page, Items, IsMobile)
	local GridContainer = Instance.new("Frame"); GridContainer.Size = UDim2.new(1, 0, 0, 0); GridContainer.BackgroundTransparency = 1; GridContainer.Parent = Page
	local Grid = Instance.new("UIGridLayout"); Grid.CellSize = UDim2.new(0, 50, 0, 50); Grid.CellPadding = UDim2.new(0, 5, 0, 5); Grid.SortOrder = Enum.SortOrder.LayoutOrder; Grid.Parent = GridContainer
	Grid:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function() GridContainer.Size = UDim2.new(1, 0, 0, Grid.AbsoluteContentSize.Y) end)
	for _, item in pairs(Items) do
		local Btn = Instance.new("TextButton"); Btn.BackgroundColor3 = Theme.ItemColor; Btn.Text = ""; Btn.Parent = GridContainer; Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)
		
		if item.ID == "RESET" then
			local TextLbl = Instance.new("TextLabel"); TextLbl.Size = UDim2.new(1, 0, 1, 0); TextLbl.BackgroundTransparency = 1; TextLbl.Text = "Default"; TextLbl.TextColor3 = Theme.Accent; TextLbl.Font = Theme.Font; TextLbl.TextSize = 11; TextLbl.Parent = Btn
		else
			local Preview = Instance.new("ImageLabel"); Preview.Size = UDim2.new(0, 24, 0, 24); Preview.Position = UDim2.new(0.5, -12, 0.5, -12); Preview.BackgroundTransparency = 1; Preview.Image = "rbxassetid://" .. item.ID; Preview.ScaleType = Enum.ScaleType.Fit; Preview.Parent = Btn
		end

		Btn.MouseButton1Click:Connect(function()
			if item.ID == "RESET" then
				if IsMobile then MobileCrosshair.Visible = false else PCCursorActive = false; PCSoftwareCursor.Visible = false; UserInputService.MouseIconEnabled = true end
			else
				local fullID = "rbxassetid://" .. item.ID
				if IsMobile then MobileCrosshair.Image = fullID; MobileCrosshair.Visible = true else PCSoftwareCursor.Image = fullID; PCCursorActive = true; PCSoftwareCursor.Visible = true end
			end
		end)
	end
end

function Library:CreateColorPicker(Page, Text, DefaultColor, Callback)
	local Frame = Instance.new("Frame")
	Frame.Size = UDim2.new(1, 0, 0, 240) 
	Frame.BackgroundColor3 = Theme.ItemColor
	Frame.Parent = Page
	Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)

	local Label = Instance.new("TextLabel")
	Label.Text = Text
	Label.Size = UDim2.new(1, -20, 0, 20)
	Label.Position = UDim2.new(0, 10, 0, 5)
	Label.BackgroundTransparency = 1
	Label.TextColor3 = Theme.Text
	Label.Font = Theme.Font
	Label.TextSize = 12
	Label.TextXAlignment = Enum.TextXAlignment.Left
	Label.Parent = Frame

	local HexBox = Instance.new("TextBox")
	HexBox.Size = UDim2.new(0, 80, 0, 20)
	HexBox.Position = UDim2.new(1, -90, 0, 5)
	HexBox.BackgroundColor3 = Theme.SwitchOff
	HexBox.TextColor3 = Theme.Text
	HexBox.Font = Enum.Font.Gotham
	HexBox.TextSize = 11
	HexBox.Text = "#" .. DefaultColor:ToHex()
	HexBox.Parent = Frame
	Instance.new("UICorner", HexBox).CornerRadius = UDim.new(0, 4)

	local SVFrame = Instance.new("Frame")
	SVFrame.Size = UDim2.new(1, -20, 0, 150)
	SVFrame.Position = UDim2.new(0, 10, 0, 35)
	SVFrame.BorderSizePixel = 0
	SVFrame.Parent = Frame
	Instance.new("UICorner", SVFrame).CornerRadius = UDim.new(0, 4)

	local HueColor = Color3.fromHSV(0, 1, 1)
	SVFrame.BackgroundColor3 = HueColor

	local WhiteOverlay = Instance.new("ImageLabel")
	WhiteOverlay.Size = UDim2.new(1, 0, 1, 0)
	WhiteOverlay.BackgroundTransparency = 1
	WhiteOverlay.Image = "rbxassetid://4801885019" 
	WhiteOverlay.Parent = SVFrame
	Instance.new("UICorner", WhiteOverlay).CornerRadius = UDim.new(0, 4)
	local WhiteGradient = Instance.new("UIGradient")
	WhiteGradient.Transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, 0), NumberSequenceKeypoint.new(1, 1)} 
	WhiteGradient.Parent = WhiteOverlay

	local BlackOverlay = Instance.new("ImageLabel")
	BlackOverlay.Size = UDim2.new(1, 0, 1, 0)
	BlackOverlay.BackgroundTransparency = 1
	BlackOverlay.Image = "rbxassetid://4801885019" 
	BlackOverlay.ImageColor3 = Color3.new(0,0,0)
	BlackOverlay.Parent = SVFrame
	Instance.new("UICorner", BlackOverlay).CornerRadius = UDim.new(0, 4)
	local BlackGradient = Instance.new("UIGradient")
	BlackGradient.Rotation = 90
	BlackGradient.Transparency = NumberSequence.new{NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(1, 0)} 
	BlackGradient.Parent = BlackOverlay

	local SVCursor = Instance.new("Frame")
	SVCursor.Size = UDim2.new(0, 10, 0, 10)
	SVCursor.AnchorPoint = Vector2.new(0.5, 0.5)
	SVCursor.BackgroundColor3 = Color3.new(1,1,1)
	SVCursor.Parent = SVFrame
	Instance.new("UICorner", SVCursor).CornerRadius = UDim.new(1, 0)
	local SVStroke = Instance.new("UIStroke")
	SVStroke.Thickness = 1.5
	SVStroke.Color = Color3.new(0,0,0)
	SVStroke.Parent = SVCursor

	local HueFrame = Instance.new("Frame")
	HueFrame.Size = UDim2.new(1, -20, 0, 25)
	HueFrame.Position = UDim2.new(0, 10, 0, 195)
	HueFrame.BackgroundColor3 = Color3.new(1,1,1)
	HueFrame.Parent = Frame
	Instance.new("UICorner", HueFrame).CornerRadius = UDim.new(0, 4)
	
	local HueGradient = Instance.new("UIGradient")
	HueGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(255,0,0)),
		ColorSequenceKeypoint.new(0.167, Color3.fromRGB(255,255,0)),
		ColorSequenceKeypoint.new(0.333, Color3.fromRGB(0,255,0)),
		ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,255,255)),
		ColorSequenceKeypoint.new(0.667, Color3.fromRGB(0,0,255)),
		ColorSequenceKeypoint.new(0.833, Color3.fromRGB(255,0,255)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(255,0,0))
	}
	HueGradient.Parent = HueFrame

	local HueCursor = Instance.new("Frame")
	HueCursor.Size = UDim2.new(0, 8, 1, 4)
	HueCursor.Position = UDim2.new(0, 0, 0.5, 0)
	HueCursor.AnchorPoint = Vector2.new(0.5, 0.5)
	HueCursor.BackgroundColor3 = Color3.new(1,1,1)
	HueCursor.BorderColor3 = Color3.new(0,0,0)
	HueCursor.BorderSizePixel = 1
	HueCursor.Parent = HueFrame
	Instance.new("UICorner", HueCursor).CornerRadius = UDim.new(0, 2)

	local h, s, v = DefaultColor:ToHSV()
	local draggingSV, draggingHue = false, false

	local function UpdateColor()
		local color = Color3.fromHSV(h, s, v)
		
		HueColor = Color3.fromHSV(h, 1, 1)
		SVFrame.BackgroundColor3 = HueColor
		SVCursor.BackgroundColor3 = color
		HexBox.Text = "#" .. color:ToHex()
		
		pcall(Callback, color)
	end

	local function UpdateSV(input)
		local rX = math.clamp((input.Position.X - SVFrame.AbsolutePosition.X) / SVFrame.AbsoluteSize.X, 0, 1)
		local rY = math.clamp((input.Position.Y - SVFrame.AbsolutePosition.Y) / SVFrame.AbsoluteSize.Y, 0, 1)
		
		s = rX
		v = 1 - rY
		
		SVCursor.Position = UDim2.new(s, 0, 1-v, 0)
		UpdateColor()
	end

	local function UpdateHue(input)
		local rX = math.clamp((input.Position.X - HueFrame.AbsolutePosition.X) / HueFrame.AbsoluteSize.X, 0, 1)
		h = 1 - rX
		h = rX
		
		HueCursor.Position = UDim2.new(h, 0, 0.5, 0)
		UpdateColor()
	end

	HueCursor.Position = UDim2.new(h, 0, 0.5, 0)
	SVCursor.Position = UDim2.new(s, 0, 1-v, 0)
	UpdateColor()

	SVFrame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			draggingSV = true
			UpdateSV(input)
		end
	end)
	
	HueFrame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			draggingHue = true
			UpdateHue(input)
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			if draggingSV then UpdateSV(input) end
			if draggingHue then UpdateHue(input) end
		end
	end)

	UserInputService.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			draggingSV = false
			draggingHue = false
		end
	end)
end

function Library:CreatePlayerCard(Page, Player, Callback)
	local Card = Instance.new("Frame"); Card.Size = UDim2.new(1, 0, 0, ContentConfig.PlayerCardHeight); Card.BackgroundColor3 = Theme.ItemColor; Card.Parent = Page; Instance.new("UICorner", Card).CornerRadius = UDim.new(0, 6)
	local Avatar = Instance.new("ImageLabel"); Avatar.Size = UDim2.new(0, 36, 0, 36); Avatar.Position = UDim2.new(0, 8, 0.5, -18); Avatar.BackgroundColor3 = Theme.SwitchOff; Avatar.Parent = Card; Instance.new("UICorner", Avatar).CornerRadius = UDim.new(0, 6)
	task.spawn(function() local content, isReady = Players:GetUserThumbnailAsync(Player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size48x48); if isReady then Avatar.Image = content end end)
	local Display = Instance.new("TextLabel"); Display.Text = Player.DisplayName; Display.Size = UDim2.new(1, -130, 0, 18); Display.Position = UDim2.new(0, 54, 0, 8); Display.BackgroundTransparency = 1; Display.Font = Theme.Font; Display.TextSize = 13; Display.TextColor3 = Theme.Text; Display.TextXAlignment = Enum.TextXAlignment.Left; Display.Parent = Card
	local User = Instance.new("TextLabel"); User.Text = "@" .. Player.Name; User.Size = UDim2.new(1, -130, 0, 14); User.Position = UDim2.new(0, 54, 0, 26); User.BackgroundTransparency = 1; User.Font = Enum.Font.Gotham; User.TextSize = 11; User.TextColor3 = Theme.TextDark; User.TextXAlignment = Enum.TextXAlignment.Left; User.Parent = Card
	local ActionBtn = Instance.new("TextButton"); ActionBtn.Size = UDim2.new(0, 75, 0, 26); ActionBtn.Position = UDim2.new(1, -83, 0.5, -13); ActionBtn.BackgroundColor3 = Theme.Accent; ActionBtn.Text = "Teleport"; ActionBtn.Font = Enum.Font.GothamBold; ActionBtn.TextSize = 11; ActionBtn.TextColor3 = Color3.new(1,1,1); ActionBtn.Parent = Card; Instance.new("UICorner", ActionBtn).CornerRadius = UDim.new(0, 6)
	ActionBtn.MouseButton1Click:Connect(function() TweenService:Create(ActionBtn, TweenInfo.new(0.1), {BackgroundColor3 = Color3.fromRGB(0, 150, 200)}):Play(); task.wait(0.1); TweenService:Create(ActionBtn, TweenInfo.new(0.2), {BackgroundColor3 = Theme.Accent}):Play(); pcall(Callback) end)
end

local VisualLogic = {
	Players = {Enabled = false, Conn = nil},
	Computers = {Enabled = false, Conn1 = nil, Conn2 = nil, List = {}},
	Doors = {Enabled = false, Conn = nil, List = {}},
	Exits = {Enabled = false, Conn = nil, List = {}},
	Pods = {Enabled = false, Conn = nil, List = {}},
	Leaves = {Enabled = false, Loop = nil}
}

local BEAST_WEAPON_NAMES = {"Hammer", "Gemstone Hammer", "Iron Hammer", "Mallet"}

local function isBeast(player)
	-- Optimization: Check Team first (Fastest)
	if player.Team and player.Team.Name == "Beast" then return true end
	
	-- Only check backpack if team is not assigned yet (Slower)
	local backpack = player:FindFirstChild("Backpack")
	local character = player.Character
	for _, weaponName in ipairs(BEAST_WEAPON_NAMES) do
		if backpack and backpack:FindFirstChild(weaponName) then return true end
		if character and character:FindFirstChild(weaponName) then return true end
	end
	return false
end

local function TogglePlayerESP(state)
	VisualLogic.Players.Enabled = state
    ActiveFeatures.EspPlayers = state
	if state then
		local lastUpdate = 0
		local function upd(p)
			if p == LocalPlayer then return end
			local char = p.Character
			if char then
				local hl = char:FindFirstChild("RoleESP")
				if not hl then
					hl = Instance.new("Highlight")
					hl.Name = "RoleESP"
					hl.Adornee = char
					hl.Parent = char
					hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
					hl.FillTransparency = 0.5
					hl.OutlineTransparency = 0
					hl.OutlineColor = ESP_COLORS.Border
				end
				-- Optimization: Check logic
				local targetColor = isBeast(p) and ESP_COLORS.Beast or ESP_COLORS.Survivor
				if hl.FillColor ~= targetColor then
					hl.FillColor = targetColor
				end
			end
		end
		-- Optimization: Run at ~10 FPS instead of 60 FPS to prevent stutter
		VisualLogic.Players.Conn = RunService.RenderStepped:Connect(function()
			if tick() - lastUpdate < 0.1 then return end
			lastUpdate = tick()
			for _, p in pairs(Players:GetPlayers()) do pcall(upd, p) end
		end)
	else
		if VisualLogic.Players.Conn then VisualLogic.Players.Conn:Disconnect() end
		for _, p in pairs(Players:GetPlayers()) do
			if p.Character and p.Character:FindFirstChild("RoleESP") then
				p.Character.RoleESP:Destroy()
			end
		end
	end
end

local function ToggleComputerESP(state)
	VisualLogic.Computers.Enabled = state
    ActiveFeatures.EspComputers = state
	if state then
		local function setup(model)
			if model.Name == "ComputerTable" then
				local screen = model:FindFirstChild("Screen")
				if screen then
					local hl = model:FindFirstChild("CompESP")
					if not hl then
						hl = Instance.new("Highlight"); hl.Name = "CompESP"
						hl.Adornee = model; hl.Parent = model
						hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
						hl.OutlineColor = ESP_COLORS.Border
						hl.OutlineTransparency = 0; hl.FillTransparency = 0.5
					end
					table.insert(VisualLogic.Computers.List, {Screen = screen, Highlight = hl, Model = model})
				end
			end
		end
		for _, obj in pairs(Workspace:GetDescendants()) do setup(obj) end
		VisualLogic.Computers.Conn1 = Workspace.DescendantAdded:Connect(setup)
		
		local lastUpdate = 0
		VisualLogic.Computers.Conn2 = RunService.RenderStepped:Connect(function()
			-- Optimization: Throttle
			if tick() - lastUpdate < 0.1 then return end
			lastUpdate = tick()
			
			for i = #VisualLogic.Computers.List, 1, -1 do
				local data = VisualLogic.Computers.List[i]
				if data.Model.Parent then
					local c = data.Screen.Color
					local targetColor
					if c.R > c.G and c.R > c.B then targetColor = ESP_COLORS.Red
					elseif c.G > c.B and c.G > c.R then targetColor = ESP_COLORS.Green
					else targetColor = ESP_COLORS.Blue end
					
					if data.Highlight.FillColor ~= targetColor then
						data.Highlight.FillColor = targetColor
					end
				else table.remove(VisualLogic.Computers.List, i) end
			end
		end)
	else
		if VisualLogic.Computers.Conn1 then VisualLogic.Computers.Conn1:Disconnect() end
		if VisualLogic.Computers.Conn2 then VisualLogic.Computers.Conn2:Disconnect() end
		for _, data in pairs(VisualLogic.Computers.List) do
			if data.Highlight then data.Highlight:Destroy() end
		end
		VisualLogic.Computers.List = {}
	end
end

local function ToggleDoorESP(state, targetName, listTable, connKey, color)
	if state then
        if connKey == "Doors" then ActiveFeatures.EspDoors = true end
        if connKey == "Exits" then ActiveFeatures.EspExits = true end
		local function setup(obj)
            -- Filtro melhorado para ignorar armários
            if (obj.Name == "Closet" or obj.Name == "Locker" or obj.Name == "Cabinet" or obj.Name == "HideSpot") then return end

			if obj.Name == targetName and (obj:IsA("Model") or obj:IsA("BasePart")) then
				if obj:FindFirstChild(targetName.."ESP") then return end
				local hl = Instance.new("Highlight")
				hl.Name = targetName.."ESP"
				hl.Adornee = obj; hl.Parent = obj
				hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
				hl.OutlineColor = ESP_COLORS.Border
				hl.OutlineTransparency = 0; hl.FillTransparency = 0.4 -- CORREÇÃO: Menos transparente para ver de longe
				hl.FillColor = color
				table.insert(listTable, {Object = obj, Highlight = hl})
			end
		end
        local count = 0
		for _, v in pairs(Workspace:GetDescendants()) do 
            setup(v) 
            count = count + 1
            if count % 100 == 0 then task.wait() end
        end
		VisualLogic[connKey].Conn = Workspace.DescendantAdded:Connect(setup)
		task.spawn(function()
			while VisualLogic[connKey].Enabled do
				task.wait(1)
				for i = #listTable, 1, -1 do
					if not listTable[i].Object.Parent then table.remove(listTable, i) end
				end
			end
		end)
	else
        if connKey == "Doors" then ActiveFeatures.EspDoors = false end
        if connKey == "Exits" then ActiveFeatures.EspExits = false end
		if VisualLogic[connKey].Conn then VisualLogic[connKey].Conn:Disconnect() end
		for _, v in pairs(listTable) do
			if v.Highlight then v.Highlight:Destroy() end
		end
		if connKey == "Doors" then VisualLogic.Doors.List = {} else VisualLogic.Exits.List = {} end
	end
	VisualLogic[connKey].Enabled = state
end

local function TogglePodESP(state)
	VisualLogic.Pods.Enabled = state
    ActiveFeatures.EspPods = state
	if state then
		local function setup(obj)
			if obj.Name == "FreezePod" then
				if obj:FindFirstChild("PodESP") then return end
				local hl = Instance.new("Highlight")
				hl.Name = "PodESP"
				hl.Adornee = obj; hl.Parent = obj
				hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
				hl.OutlineColor = ESP_COLORS.Border
				hl.OutlineTransparency = 0; hl.FillTransparency = 0.5
				hl.FillColor = ESP_COLORS.Pod
				table.insert(VisualLogic.Pods.List, {Object = obj, Highlight = hl})
			end
		end
        local count = 0
		for _, v in pairs(Workspace:GetDescendants()) do 
            setup(v) 
            count = count + 1
            if count % 100 == 0 then task.wait() end
        end
		VisualLogic.Pods.Conn = Workspace.DescendantAdded:Connect(setup)
	else
		if VisualLogic.Pods.Conn then VisualLogic.Pods.Conn:Disconnect() end
		for _, v in pairs(VisualLogic.Pods.List) do
			if v.Highlight then v.Highlight:Destroy() end
		end
		VisualLogic.Pods.List = {}
	end
end

local function ToggleHideLeaves(state)
	VisualLogic.Leaves.Enabled = state
    ActiveFeatures.HideLeaves = state
	
	local function isGreen(part)
		local c = part.Color
		return (c.G > c.R) and (c.G > c.B)
	end

	local function isPlayerPart(part)
		if part.Parent:FindFirstChild("Humanoid") or part.Parent.Parent:FindFirstChild("Humanoid") then return true end
		return false
	end

	local function process(targetTrans)
		local count = 0
		for _, part in pairs(Workspace:GetDescendants()) do
			if part:IsA("BasePart") then
				if isPlayerPart(part) then continue end
				if part.Material == Enum.Material.Wood or part.Material == Enum.Material.WoodPlanks then continue end
				if part.Color.R > 0.3 and part.Color.B < 0.2 and part.Color.G < 0.3 then continue end
				if part.CanCollide == true then continue end
				
				if isGreen(part) then
					part.Transparency = targetTrans
				end
			end
			count = count + 1
			if count % 100 == 0 then RunService.Heartbeat:Wait() end 
		end
	end

	if state then
		task.spawn(function()
			process(1) 
			VisualLogic.Leaves.Loop = Workspace.DescendantAdded:Connect(function(child)
				if child:IsA("BasePart") and isGreen(child) and not child.CanCollide then
					task.wait()
					child.Transparency = 1
				end
			end)
		end)
	else
		if VisualLogic.Leaves.Loop then VisualLogic.Leaves.Loop:Disconnect() end
		task.spawn(function() process(0) end) 
	end
end

local VisualPage = createSidebarButton("76176408662599", "Visual")
local ProgressPage = createSidebarButton("105442920358687", "Progress")
local MapPage = createSidebarButton("14240466919", "Map") 
local LegitPage = createSidebarButton("11322093465", "Legit")
local TeleportPage = createSidebarButton("12689978575", "Teleport")
local CrossHairPage = createSidebarButton("114326908103962", "CrossHair")
local SoundsPage = createSidebarButton("7203392850", "Sounds")
local SettingsPage = createSidebarButton("18692715829", "Settings")

Library:CreateToggle(VisualPage, "Esp Players", false, function(state) TogglePlayerESP(state) end)
Library:CreateToggle(VisualPage, "Esp Computers", false, function(state) ToggleComputerESP(state) end) 
Library:CreateToggle(VisualPage, "Esp Doors", false, function(state) ToggleDoorESP(state, "Door", VisualLogic.Doors.List, "Doors", ESP_COLORS.Door) end)
Library:CreateToggle(VisualPage, "Esp ExitDoors", false, function(state) ToggleDoorESP(state, "ExitDoor", VisualLogic.Exits.List, "Exits", ESP_COLORS.Exit) end)
Library:CreateToggle(VisualPage, "Esp Freezepods", false, function(state) TogglePodESP(state) end)
Library:CreateToggle(VisualPage, "Hide Leaves (Only Homestead)", false, function(state) ToggleHideLeaves(state) end)

do
	Library:CreateSection(SettingsPage, "Hitbox Extender")
	local hbEnabled = false
	local hbShowVisual = true 
	local hbSize = 2
	local hbConnection = nil

	local function updateHitboxes()
		for _, v in pairs(Players:GetPlayers()) do
			if v ~= LocalPlayer and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
				local hrp = v.Character.HumanoidRootPart
				
				local targetSize = Vector3.new(hbSize, hbSize, hbSize)
				if hrp.Size ~= targetSize then hrp.Size = targetSize end
				
				local targetTrans = hbShowVisual and 0.6 or 1
				if hrp.Transparency ~= targetTrans then hrp.Transparency = targetTrans end
				
				hrp.CanCollide = false
			end
		end
	end

	Library:CreateToggle(SettingsPage, "Enable Hitbox", false, function(state)
		hbEnabled = state
		if state then
			local lastUpdate = 0
			hbConnection = RunService.RenderStepped:Connect(function()
				-- Optimization: Throttle Hitbox Updates to ~30 FPS
				if tick() - lastUpdate < 0.03 then return end
				lastUpdate = tick()
				updateHitboxes()
			end)
		else
			if hbConnection then hbConnection:Disconnect() end
			for _, v in pairs(Players:GetPlayers()) do
				if v ~= LocalPlayer and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
					v.Character.HumanoidRootPart.Size = Vector3.new(2, 2, 1)
					v.Character.HumanoidRootPart.Transparency = 1
					v.Character.HumanoidRootPart.CanCollide = true
				end
			end
		end
	end)
	
	Library:CreateToggle(SettingsPage, "Show Hitbox Visual", true, function(state)
		hbShowVisual = state
	end)
	
	Library:CreateSlider(SettingsPage, "Size", 2, 25, 2, function(v) hbSize = v end)

	Library:CreateSection(SettingsPage, "WalkSpeed")
	local wsEnabled = false
	local wsValue = 16
	local wsConnection = nil

	Library:CreateToggle(SettingsPage, "Enable WalkSpeed", false, function(state)
		wsEnabled = state
		if state then
			wsConnection = RunService.Stepped:Connect(function()
				if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
					LocalPlayer.Character.Humanoid.WalkSpeed = wsValue
				end
			end)
		else
			if wsConnection then wsConnection:Disconnect() end
			if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
				LocalPlayer.Character.Humanoid.WalkSpeed = 16
			end
		end
	end)
	Library:CreateSlider(SettingsPage, "Speed", 16, 50, 16, function(v) wsValue = v end)

	Library:CreateSection(SettingsPage, "Survivor ESP Color")
	Library:CreateColorPicker(SettingsPage, "Pick Color", ESP_COLORS.Survivor, function(c) ESP_COLORS.Survivor = c end)

	Library:CreateSection(SettingsPage, "Beast ESP Color")
	Library:CreateColorPicker(SettingsPage, "Pick Color", ESP_COLORS.Beast, function(c) ESP_COLORS.Beast = c end)
end

do
	local Players = game:GetService("Players")
	local ReplicatedStorage = game:GetService("ReplicatedStorage")
	local RunService = game:GetService("RunService")
	local UserInputService = game:GetService("UserInputService")
	local Workspace = game:GetService("Workspace")

	progressEnabled = false 
	activeComputers = {} 

	local function createProgressBar(parent)
		if parent:FindFirstChild("ProgressBar") then 
			local bb = parent.ProgressBar
			return bb, bb.BackgroundBar.Bar, bb.ProgressText
		end

		local billboard = Instance.new("BillboardGui")
		billboard.Name = "ProgressBar"
		billboard.Adornee = parent
		billboard.Size = UDim2.new(0, 110, 0, 30)
		billboard.StudsOffset = Vector3.new(0, 4.5, 0)
		billboard.AlwaysOnTop = true
		billboard.Enabled = progressEnabled
		billboard.Parent = parent

		local text = Instance.new("TextLabel")
		text.Name = "ProgressText"
		text.Size = UDim2.new(1, 0, 0, 20)
		text.BackgroundTransparency = 1
		text.TextColor3 = Color3.fromRGB(255, 255, 255)
		text.TextStrokeTransparency = 0
		text.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
		text.Font = Enum.Font.GothamBold
		text.TextSize = 16
		text.Text = "0%"
		text.Parent = billboard

		local bgBar = Instance.new("Frame")
		bgBar.Name = "BackgroundBar"
		bgBar.Size = UDim2.new(1, 0, 0, 6)
		bgBar.Position = UDim2.new(0, 0, 1, -6)
		bgBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		bgBar.BorderSizePixel = 1
		bgBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
		bgBar.Parent = billboard

		local bar = Instance.new("Frame")
		bar.Name = "Bar"
		bar.Size = UDim2.new(0, 0, 1, 0)
		bar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		bar.BorderSizePixel = 0
		bar.Parent = bgBar

		return billboard, bar, text
	end

	local function setupComputer(tableModel)
		if activeComputers[tableModel] then return end

		local billboard, bar, text = createProgressBar(tableModel)
		
		local highlight = tableModel:FindFirstChild("ComputerHighlight")
		if not highlight then
			highlight = Instance.new("Highlight")
			highlight.Name = "ComputerHighlight"
			highlight.Parent = tableModel
		end
		
		highlight.FillTransparency = 0.5
		highlight.OutlineTransparency = 0
		highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
		highlight.Enabled = progressEnabled

		activeComputers[tableModel] = {
			Billboard = billboard,
			Highlight = highlight,
			Model = tableModel
		}

		local savedProgress = 0
        local lastCompUpdate = 0

		RunService.Heartbeat:Connect(function()
            if tick() - lastCompUpdate < 0.1 then return end
            lastCompUpdate = tick()

			if not tableModel or not tableModel.Parent or not activeComputers[tableModel] then 
				return 
			end

			if not progressEnabled then 
				highlight.Enabled = false
				billboard.Enabled = false
				return 
			else
				highlight.Enabled = true
				billboard.Enabled = true
			end

			local screen = tableModel:FindFirstChild("Screen")
			
			if screen and screen:IsA("BasePart") then
				local c = screen.Color
				if (c.G > c.R and c.G > c.B) or savedProgress >= 0.99 then
					highlight.FillColor = Color3.fromRGB(0, 255, 100) 
					highlight.OutlineColor = Color3.fromRGB(0, 255, 100)
					bar.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
					text.Text = "DONE"
					text.TextColor3 = Color3.fromRGB(0, 255, 100)
				elseif (c.R > c.G and c.R > c.B) then
					highlight.FillColor = Color3.fromRGB(255, 0, 0)
				else
					highlight.FillColor = screen.Color
					highlight.OutlineColor = screen.Color
				end
			end

			local currentFrameMax = 0
			local isAnyoneTouching = false

			for _, part in ipairs(tableModel:GetChildren()) do
				if part:IsA("BasePart") and part.Name:match("^ComputerTrigger") then
					local touching = part:GetTouchingParts()
					for _, touchingPart in ipairs(touching) do
						local character = touchingPart.Parent
						local plr = Players:GetPlayerFromCharacter(character)
						
						if plr then
							local tpsm = plr:FindFirstChild("TempPlayerStatsModule")
							if tpsm then
								local ragdoll = tpsm:FindFirstChild("Ragdoll")
								local ap = tpsm:FindFirstChild("ActionProgress")
								
								if ragdoll and (ragdoll.Value == false) and ap then
									currentFrameMax = math.max(currentFrameMax, ap.Value)
									isAnyoneTouching = true
								end
							end
						end
					end
				end
			end

			if isAnyoneTouching then
				savedProgress = math.max(savedProgress, currentFrameMax)
			end

			bar.Size = UDim2.new(savedProgress, 0, 1, 0)

			if savedProgress < 0.99 and not (text.Text == "DONE") then
				bar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
				text.TextColor3 = Color3.fromRGB(255, 255, 255)
				text.Text = string.format("%d%%", math.floor(savedProgress * 100))
			end
		end)
	end

	local function reloadComputers()
		for _, obj in ipairs(Workspace:GetDescendants()) do
			if obj.Name == "ComputerTable" then setupComputer(obj) end
		end
	end

	Library:CreateToggle(ProgressPage, "Computer Progress", false, function(state)
		progressEnabled = state
		if not state then
			for model, data in pairs(activeComputers) do
				if data.Billboard then data.Billboard:Destroy() end
				if data.Highlight then data.Highlight:Destroy() end
			end
			activeComputers = {}
		else
			reloadComputers()
			Workspace.DescendantAdded:Connect(function(descendant)
				if descendant.Name == "ComputerTable" and progressEnabled then
					setupComputer(descendant)
				end
			end)
		end
	end)
end

do
	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local CoreGui = game:GetService("CoreGui")

	local isBeastPowerEnabled = false

	local function getUIContainer()
		local success, result = pcall(function() return CoreGui end)
		if success then return result else return Players.LocalPlayer:WaitForChild("PlayerGui") end
	end

	local function createTextOnlyHUD()
		local container = getUIContainer()
		if container:FindFirstChild("BeastTextHUD") then container.BeastTextHUD:Destroy() end
		local screenGui = Instance.new("ScreenGui")
		screenGui.Name = "BeastTextHUD"
		screenGui.IgnoreGuiInset = true
		screenGui.ResetOnSpawn = false
		screenGui.Parent = container

		local label = Instance.new("TextLabel")
		label.Name = "StatusText"
		label.AnchorPoint = Vector2.new(1, 0) 
		label.Position = UDim2.new(1, -15, 0.60, 0) 
		label.Size = UDim2.new(0, 200, 0, 30)
		label.BackgroundTransparency = 1 
		label.Text = "BEAST POWER: 0%"
		label.TextColor3 = Color3.fromRGB(255, 255, 255)
		label.TextStrokeTransparency = 0 
		label.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
		label.Font = Enum.Font.SourceSansBold
		label.TextSize = 18 
		label.TextXAlignment = Enum.TextXAlignment.Right 
		label.Visible = false 
		label.Parent = screenGui
		return label
	end

	local statusLabel = createTextOnlyHUD()

	RunService.Heartbeat:Connect(function()
		if not isBeastPowerEnabled then statusLabel.Visible = false; return end

		local foundBeast = false

		for _, player in ipairs(Players:GetPlayers()) do
			if player.Character then
				local beastPowers = player.Character:FindFirstChild("BeastPowers")
				
				if beastPowers then
					foundBeast = true
					statusLabel.Visible = true
					
					local numberValue = beastPowers:FindFirstChildOfClass("NumberValue")
					if numberValue then
						local percent = math.clamp(numberValue.Value, 0, 1)
						local percentInt = math.floor(percent * 100)
						
						statusLabel.Text = "BEAST POWER: " .. percentInt .. "%"
						
						if percent >= 0.99 then
							statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
						else
							statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
						end
					end
					break 
				end
			end
		end
		if not foundBeast then statusLabel.Visible = false end
	end)
	
	Library:CreateToggle(ProgressPage, "BeastPower Timer", false, function(state) isBeastPowerEnabled = state end)
end

do
	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local CoreGui = game:GetService("CoreGui")
	local Workspace = game:GetService("Workspace")

	local COUNTDOWN_DURATION = 28
	local activeTimers = {}

	local function getUIContainer()
		local success, result = pcall(function() return CoreGui end)
		if success then return result else return Players.LocalPlayer:WaitForChild("PlayerGui") end
	end

	local function createGlobalHUD()
		local parent = getUIContainer()
		if parent:FindFirstChild("RagdollGlobalHUD") then parent.RagdollGlobalHUD:Destroy() end
		local screenGui = Instance.new("ScreenGui")
		screenGui.Name = "RagdollGlobalHUD"
		screenGui.IgnoreGuiInset = true
		screenGui.ResetOnSpawn = false
		screenGui.Parent = parent
		local frame = Instance.new("Frame")
		frame.Name = "Container"
		frame.AnchorPoint = Vector2.new(1, 0) 
		frame.Position = UDim2.new(1, -10, 0.35, 0) 
		frame.Size = UDim2.new(0, 250, 0, 400)
		frame.BackgroundTransparency = 1
		frame.Parent = screenGui
		frame.Visible = false
		local listLayout = Instance.new("UIListLayout")
		listLayout.Padding = UDim.new(0, 2) 
		listLayout.SortOrder = Enum.SortOrder.LayoutOrder
		listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right
		listLayout.Parent = frame
		return frame
	end

	local globalFrame = createGlobalHUD()

	local function createGlobalLabel(playerName)
		local label = Instance.new("TextLabel")
		label.Name = playerName
		label.Size = UDim2.new(1, 0, 0, 22) 
		label.BackgroundTransparency = 1 
		label.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		label.Text = ""
		label.TextColor3 = Color3.fromRGB(255, 255, 255)
		label.Font = Enum.Font.GothamBold 
		label.TextSize = 16
		label.TextXAlignment = Enum.TextXAlignment.Right 
		label.TextStrokeTransparency = 0
		label.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
		label.Parent = globalFrame
		return label
	end

	local function inFreezePod(player)
		local char = player.Character
		local head = char and char:FindFirstChild("Head")
		if not head then return false end
		local parts = Workspace:GetPartBoundsInBox(head.CFrame, Vector3.new(2, 2, 2))
		for _, part in ipairs(parts) do if part.Parent and part.Parent.Name == "FreezePod" then return true end end
		return false
	end

	local function clearData(player)
		if activeTimers[player] then
			if activeTimers[player].GlobalLabel then activeTimers[player].GlobalLabel:Destroy() end
			activeTimers[player] = nil
		end
	end

	RunService.Heartbeat:Connect(function()
		for _, player in ipairs(Players:GetPlayers()) do
			local char = player.Character
			local humanoid = char and char:FindFirstChildOfClass("Humanoid")
			if humanoid and humanoid.PlatformStand then
				local isFrozen = inFreezePod(player)
				if not activeTimers[player] then activeTimers[player] = {EndTime = tick() + COUNTDOWN_DURATION} end
				local data = activeTimers[player]
				if isFrozen then
					if data.GlobalLabel then data.GlobalLabel.Visible = false end
					data.EndTime = tick() + (data.RemainingLast or COUNTDOWN_DURATION)
				else
					local remaining = data.EndTime - tick()
					data.RemainingLast = remaining
					if not data.GlobalLabel then data.GlobalLabel = createGlobalLabel(player.Name); data.GlobalLabel.Visible = true end
					data.GlobalLabel.Visible = true
					if remaining <= 0 then clearData(player)
					else
						local textTime = string.format("%.2fs", remaining)
						local color = Color3.fromRGB(255, 255, 255)
						if remaining < 10 then color = Color3.fromRGB(255, 200, 50) end
						if remaining < 5 then color = Color3.fromRGB(255, 80, 80) end
						if data.GlobalLabel then data.GlobalLabel.Text = player.DisplayName .. ": " .. textTime; data.GlobalLabel.TextColor3 = color end
					end
				end
			else clearData(player) end
		end
	end)
	Players.PlayerRemoving:Connect(function(player) clearData(player) end)
	Library:CreateToggle(ProgressPage, "GetUp Timer", false, function(state) if globalFrame then globalFrame.Visible = state end end)
end

do
	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local Workspace = game:GetService("Workspace")

	local CONFIG = {
		ESP_ENABLED = false,
		CHECK_INTERVAL = 3,
		MAX_DISTANCE = 99999, -- CORREÇÃO: Removido limite visual (distância infinita)
		CALC_DISTANCE = 25, 
		
		DOOR_NAMES = {
			["SingleDoor"] = true, 
			["DoubleDoor"] = true,
			["SlidingDoor"] = true 
		},
		
		BLACKLIST = {
			["ExitDoor"] = true,
			["Decorative"] = true,
			["FakeDoor"] = true,
			["ElevatorDoor"] = true,
			["Closet"] = true,   -- CORREÇÃO: Ignorar armários
			["Locker"] = true,   -- CORREÇÃO: Ignorar armários
            ["HideSpot"] = true, -- CORREÇÃO: Ignorar escondetijos
            ["Cabinet"] = true
		}
	}

	local COLORS = {
		CLOSE = Color3.fromRGB(255, 0, 0),
		OPENING = Color3.fromRGB(255, 255, 0),
		OPEN = Color3.fromRGB(0, 255, 100)
	}

	local trackedDoors = {}

	local function createDoorHUD(parent)
		if parent:FindFirstChild("NormalDoorGUI") then parent.NormalDoorGUI:Destroy() end

		local billboard = Instance.new("BillboardGui")
		billboard.Name = "NormalDoorGUI"
		billboard.Adornee = parent
		billboard.Size = UDim2.new(0, 100, 0, 40) 
		billboard.StudsOffset = Vector3.new(0, 0, 0)
		billboard.AlwaysOnTop = true
		billboard.Enabled = CONFIG.ESP_ENABLED
		billboard.Parent = parent

		local text = Instance.new("TextLabel")
		text.Name = "StatusText"
		text.Size = UDim2.new(1, 0, 0, 15)
		text.Position = UDim2.new(0, 0, 0.3, 0)
		text.BackgroundTransparency = 1
		text.Text = "..."
		text.TextColor3 = COLORS.CLOSE
		text.TextStrokeTransparency = 0.8
		text.TextStrokeColor3 = Color3.new(0,0,0)
		text.Font = Enum.Font.GothamBold
		text.TextSize = 13
		text.ZIndex = 5
		text.Parent = billboard

		local bgBar = Instance.new("Frame")
		bgBar.Name = "BgBar"
		bgBar.Size = UDim2.new(0.8, 0, 0, 6)
		bgBar.Position = UDim2.new(0.1, 0, 0.7, 0)
		bgBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		bgBar.BorderSizePixel = 1;
		bgBar.Visible = false
		bgBar.ZIndex = 5
		bgBar.Parent = billboard

		local fill = Instance.new("Frame")
		fill.Name = "Fill"
		fill.Size = UDim2.new(0, 0, 1, 0)
		fill.BackgroundColor3 = COLORS.OPENING
		fill.BorderSizePixel = 0
		fill.ZIndex = 6
		fill.Parent = bgBar

		return billboard, fill, text, bgBar
	end

	local function createHighlight(model)
		if model:FindFirstChild("NormalDoorESP") then model.NormalDoorESP:Destroy() end
		local hl = Instance.new("Highlight")
		hl.Name = "NormalDoorESP"
		hl.FillColor = COLORS.CLOSE
		hl.OutlineColor = Color3.fromRGB(0, 0, 0)
		hl.FillTransparency = 0.4 -- CORREÇÃO: Visibilidade melhorada
		hl.OutlineTransparency = 0.2
		hl.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
		hl.Enabled = CONFIG.ESP_ENABLED
		hl.Parent = model
		return hl
	end

	local function getRealDoorPart(model)
		local explicitDoor = model:FindFirstChild("Door") or model:FindFirstChild("Left") or model:FindFirstChild("Right")
		if explicitDoor and explicitDoor:IsA("BasePart") then return explicitDoor end

		local biggestPart = nil
		local maxVolume = 0
		for _, part in ipairs(model:GetDescendants()) do
			if part:IsA("BasePart") and not part.Name:match("Frame") and not part.Name:match("Wall") and part.Transparency < 1 then
				local v = part.Size.X * part.Size.Y * part.Size.Z
				if v > maxVolume then maxVolume = v; biggestPart = part end
			end
		end
		return biggestPart or model.PrimaryPart
	end

	local function setupDoor(doorModel)
		if trackedDoors[doorModel] then return end
        
        -- Double Check Blacklist Logic
		if CONFIG.BLACKLIST[doorModel.Name] then return end
        if doorModel.Name:find("Closet") or doorModel.Name:find("Locker") or doorModel.Name:find("Cabinet") then return end
		if doorModel.Name:match("Exit") or doorModel.Name:match("Decor") then return end

		local anchorPart = getRealDoorPart(doorModel)
		if not anchorPart then return end

		if anchorPart:FindFirstChild("NormalDoorGUI") then
			anchorPart.NormalDoorGUI:Destroy()
		end

		local billboard, bar, text, bgBar = createDoorHUD(anchorPart)
		local highlight = createHighlight(doorModel)
		
		trackedDoors[doorModel] = {
			Model = doorModel,
			Anchor = anchorPart,
			InitialCFrame = anchorPart.CFrame,
			Billboard = billboard,
			Bar = bar,
			Text = text,
			BgBar = bgBar,
			Highlight = highlight
		}
	end

	local overlapParams = OverlapParams.new()
	overlapParams.FilterType = Enum.RaycastFilterType.Exclude

	local function getInteractionProgress(doorModel)
		local maxVal = 0
		local cf, size = doorModel:GetBoundingBox()
		
		overlapParams.FilterDescendantsInstances = {doorModel}
		local parts = Workspace:GetPartBoundsInBox(cf, Vector3.new(12, 12, 12), overlapParams)

		for _, part in ipairs(parts) do
			local char = part.Parent
			local player = Players:GetPlayerFromCharacter(char)
			if player then
				local stats = player:FindFirstChild("TempPlayerStatsModule")
				if stats then
					local action = stats:FindFirstChild("ActionProgress")
					if action and action.Value > 0 then
						maxVal = math.max(maxVal, action.Value)
					end
				end
			end
		end
		if maxVal > 1 then maxVal = maxVal / 100 end
		return maxVal
	end

	local lastUpdate = 0
	local UPDATE_RATE = 0.2 -- Increased delay

	RunService.Heartbeat:Connect(function()
		if tick() - lastUpdate < UPDATE_RATE then return end
		lastUpdate = tick()

		local cam = Workspace.CurrentCamera
		if not cam then return end
		local camPos = cam.CFrame.Position
		
		for doorModel, data in pairs(trackedDoors) do
			if not doorModel.Parent or not data.Anchor or not data.Anchor.Parent then
				trackedDoors[doorModel] = nil
				continue
			end

			local dist = (data.Anchor.Position - camPos).Magnitude

			if dist > CONFIG.MAX_DISTANCE then
				if data.Billboard.Enabled then
					data.Billboard.Enabled = false
					data.Highlight.Enabled = false
				end
				continue
			else
				data.Billboard.Enabled = CONFIG.ESP_ENABLED
				data.Highlight.Enabled = CONFIG.ESP_ENABLED
			end

			local currentCF = data.Anchor.CFrame
			local distMoved = (currentCF.Position - data.InitialCFrame.Position).Magnitude
			local dot = currentCF.LookVector:Dot(data.InitialCFrame.LookVector)
			
			if data.Anchor.CanCollide == true then
				if dot < 0.9 or distMoved > 0.5 then
					data.InitialCFrame = currentCF
					dot = 1
				end
			end

			local isPhysicallyOpen = false
			
			if not data.Anchor.CanCollide or dot < 0.85 or distMoved > 0.5 or data.Anchor.Transparency > 0.8 then
				isPhysicallyOpen = true
			end
			
			local interactionVal = 0
			if not isPhysicallyOpen and dist < CONFIG.CALC_DISTANCE then
				interactionVal = getInteractionProgress(doorModel)
			end

			if isPhysicallyOpen then
				if data.Text.Text ~= "OPEN" then
					data.Text.Text = "OPEN"
					data.Text.TextColor3 = COLORS.OPEN
					data.Highlight.FillColor = COLORS.OPEN
					data.BgBar.Visible = false
				end
			elseif interactionVal > 0.05 then 
				data.Text.Text = "OPENING"
				data.Text.TextColor3 = COLORS.OPENING
				data.Highlight.FillColor = COLORS.OPENING
				data.BgBar.Visible = true
				
				local sizeScale = math.clamp(interactionVal, 0, 1)
				data.Bar.Size = UDim2.new(sizeScale, 0, 1, 0)
			else
				if data.Text.Text ~= "CLOSE" then
					data.Text.Text = "CLOSE"
					data.Text.TextColor3 = COLORS.CLOSE
					data.Highlight.FillColor = COLORS.CLOSE
					data.BgBar.Visible = false
				end
			end
		end
	end)

	task.spawn(function()
		while true do
            local count = 0
			for _, obj in ipairs(Workspace:GetDescendants()) do
				if obj:IsA("Model") then
					local name = obj.Name
					if CONFIG.DOOR_NAMES[name] and not CONFIG.BLACKLIST[name] then
						setupDoor(obj)
					end
				end
                count = count + 1
                if count % 100 == 0 then task.wait() end
			end
			task.wait(CONFIG.CHECK_INTERVAL)
		end
	end)
	
	Library:CreateToggle(ProgressPage, "Door Timer", false, function(state)
		CONFIG.ESP_ENABLED = state
	end)
end

do
	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local Workspace = game:GetService("Workspace")

	local espEnabled = false
	local activeDoors = {}
	local COLORS = {RED = Color3.fromRGB(255, 50, 50), YELLOW = Color3.fromRGB(255, 200, 0), GREEN = Color3.fromRGB(50, 255, 100)}

	local function createDoorHUD(parent)
		if parent:FindFirstChild("DoorGUI") then local bb = parent.DoorGUI; return bb, bb.BgBar.Fill, bb.StatusText end
		local billboard = Instance.new("BillboardGui")
		billboard.Name = "DoorGUI"
		billboard.Adornee = parent
		billboard.Size = UDim2.new(0, 120, 0, 30) 
		billboard.StudsOffset = Vector3.new(0, 2, 0)
		billboard.AlwaysOnTop = true
		billboard.Enabled = espEnabled
		billboard.Parent = parent
		local text = Instance.new("TextLabel"); text.Name = "StatusText"; text.Size = UDim2.new(1, 0, 0, 15); text.BackgroundTransparency = 1; text.Text = "EXIT DOOR"; text.TextColor3 = COLORS.RED; text.TextStrokeTransparency = 0; text.TextStrokeColor3 = Color3.new(0,0,0); text.Font = Enum.Font.GothamBlack; text.TextSize = 14; text.Parent = billboard
		local bgBar = Instance.new("Frame"); bgBar.Name = "BgBar"; bgBar.Size = UDim2.new(1, 0, 0, 6); bgBar.Position = UDim2.new(0, 0, 1, -6); bgBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30); bgBar.BorderSizePixel = 1; bgBar.BorderColor3 = Color3.new(0,0,0); bgBar.Parent = billboard
		local fill = Instance.new("Frame"); fill.Name = "Fill"; fill.Size = UDim2.new(0, 0, 1, 0); fill.BackgroundColor3 = COLORS.YELLOW; fill.BorderSizePixel = 0; fill.Parent = bgBar
		return billboard, fill, text
	end

	local function setupExitDoor(doorModel)
		if activeDoors[doorModel] then return end
		if not doorModel:IsA("Model") then return end
		local highlight = doorModel:FindFirstChildOfClass("Highlight") or Instance.new("Highlight")
		highlight.Name = "DoorESP"; highlight.FillColor = COLORS.RED; highlight.OutlineColor = Color3.fromRGB(255, 255, 255); highlight.FillTransparency = 0.4; highlight.OutlineTransparency = 0.2; highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop; highlight.Enabled = espEnabled; highlight.Parent = doorModel
		local centerPart = doorModel.PrimaryPart or doorModel:FindFirstChildWhichIsA("BasePart", true)
		if not centerPart then return end 
		local billboard, bar, text = createDoorHUD(centerPart)
		local doorData = {Connection = nil, Billboard = billboard, Highlight = highlight, IsOpen = false}
		activeDoors[doorModel] = doorData
		local lastUpdate = 0
		local UPDATE_RATE = 0.2 -- Increased
		local overlapParams = OverlapParams.new()
		overlapParams.FilterDescendantsInstances = {doorModel}
		overlapParams.FilterType = Enum.RaycastFilterType.Exclude

		doorData.Connection = RunService.Heartbeat:Connect(function()
			if not doorModel or not doorModel.Parent then if doorData.Connection then doorData.Connection:Disconnect() end; activeDoors[doorModel] = nil; return end
			if tick() - lastUpdate < UPDATE_RATE then return end
			lastUpdate = tick()
			if doorData.IsOpen then
				bar.Size = UDim2.new(1, 0, 1, 0); bar.BackgroundColor3 = COLORS.GREEN; text.Text = "OPEN"; text.TextColor3 = COLORS.GREEN; highlight.FillColor = COLORS.GREEN; return
			end
			local rawMax = 0
			local cf, size = doorModel:GetBoundingBox()
			local partsInBox = Workspace:GetPartBoundsInBox(cf, Vector3.new(35, 35, 35), overlapParams)
			for _, part in ipairs(partsInBox) do
				local char = part.Parent
				local player = Players:GetPlayerFromCharacter(char)
				if player then
					local stats = player:FindFirstChild("TempPlayerStatsModule")
					if stats then
						local actionProgress = stats:FindFirstChild("ActionProgress")
						if actionProgress and actionProgress.Value > 0 then if actionProgress.Value > rawMax then rawMax = actionProgress.Value end end
					end
				end
			end
			local finalScale = rawMax
			if rawMax > 1 then finalScale = rawMax / 100 end
			finalScale = math.clamp(finalScale, 0, 1)
			if finalScale >= 0.95 then doorData.IsOpen = true end
			bar.Size = UDim2.new(finalScale, 0, 1, 0)
			if finalScale > 0.01 then
				bar.BackgroundColor3 = COLORS.YELLOW; text.Text = string.format("OPENING %d%%", math.floor(finalScale * 100)); text.TextColor3 = COLORS.YELLOW; highlight.FillColor = COLORS.YELLOW
			else
				bar.BackgroundColor3 = COLORS.RED; text.Text = "EXIT DOOR"; text.TextColor3 = COLORS.RED; highlight.FillColor = COLORS.RED
			end
		end)
	end

	task.spawn(function()
		while true do
			task.wait(2)
            local count = 0
			for _, obj in ipairs(Workspace:GetDescendants()) do
				if obj:IsA("Model") and obj.Name == "ExitDoor" then
					setupExitDoor(obj)
				end
                count = count + 1
                if count % 100 == 0 then task.wait() end
			end
		end
	end)

	Library:CreateToggle(ProgressPage, "ExitDoor Timer", false, function(state)
		espEnabled = state
		for _, d in pairs(activeDoors) do if d.Billboard then d.Billboard.Enabled = state end; if d.Highlight then d.Highlight.Enabled = state end end
	end)
end

do
	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local CoreGui = game:GetService("CoreGui")
	local LocalPlayer = Players.LocalPlayer
	local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
	local isSpawnTimerEnabled = false 

	local screenGui = Instance.new("ScreenGui"); screenGui.Name = "FleeBeastCountdown"; screenGui.ResetOnSpawn = false
	if RunService:IsStudio() then screenGui.Parent = PlayerGui else pcall(function() screenGui.Parent = CoreGui end); if not screenGui.Parent then screenGui.Parent = PlayerGui end end
	screenGui.Enabled = false 

	local container = Instance.new("Frame"); container.Name = "TimerContainer"; container.Size = UDim2.new(0, 500, 0, 80); container.Position = UDim2.new(0.5, -250, 0.2, 0); container.BackgroundTransparency = 1; container.Visible = false; container.Parent = screenGui
	local timerText = Instance.new("TextLabel"); timerText.Name = "MainText"; timerText.Size = UDim2.new(1, 0, 1, 0); timerText.BackgroundTransparency = 1; timerText.Font = Enum.Font.FredokaOne; timerText.TextSize = 42; timerText.TextColor3 = Color3.fromRGB(255, 230, 0); timerText.TextStrokeTransparency = 0; timerText.TextStrokeColor3 = Color3.new(0,0,0); timerText.Text = ""; timerText.Parent = container

	local isCounting = false
	local function CheckForHeadStartText()
		local guiObjects = PlayerGui:GetDescendants()
		for _, obj in ipairs(guiObjects) do if obj:IsA("TextLabel") and obj.Visible then local txt = string.upper(obj.Text); if string.find(txt, "HEAD START") then return true end end end
		return false
	end

	local function StartCountdown()
		isCounting = true; container.Visible = true
		for i = 15, 1, -1 do
			timerText.Text = "BEAST SPAWNS IN " .. i .. "sec"
			if i <= 5 then timerText.TextColor3 = Color3.fromRGB(255, 50, 50) else timerText.TextColor3 = Color3.fromRGB(255, 230, 0) end
			task.wait(1)
		end
		timerText.Text = "BEAST SPAWNED"; timerText.TextColor3 = Color3.fromRGB(255, 0, 0)
		for k = 1, 3 do timerText.Visible = false; task.wait(0.2); timerText.Visible = true; task.wait(0.4) end
		task.wait(2); container.Visible = false; task.wait(5); isCounting = false
	end

	task.spawn(function() while true do task.wait(0.5); if not isCounting and isSpawnTimerEnabled then if CheckForHeadStartText() then StartCountdown() end end end end)
	Library:CreateToggle(ProgressPage, "BeastSpawn Timer", false, function(state) isSpawnTimerEnabled = state; screenGui.Enabled = state end)
end

do
	local stretchConnection = nil
	local greyConnection = nil
	local hackConnection = nil
    local isGrayEnabled = false
	
	local fogRestore = {Color = nil, Glare = nil, Haze = nil, Decay = nil, Density = nil, Offset = nil}
	local volumeSignals = {} 
	local hackSignals = {}

	local OriginalAssets = {} 

	local function GreyOutfits(v)
		if not v or not v.Character then return end
		local char = v.Character
		
		if not OriginalAssets[v.Name] then OriginalAssets[v.Name] = {} end

		for _, i in ipairs(char:GetChildren()) do
			if i:IsA("BasePart") or i:IsA("MeshPart") then
				if i.Name ~= "HumanoidRootPart" then
					if not OriginalAssets[v.Name][i] then OriginalAssets[v.Name][i] = {Color = i.Color, Material = i.Material} end
					i.Color = Color3.fromRGB(150,150,150)
					i.Material = Enum.Material.SmoothPlastic
				end
			elseif i:IsA("Accessory") and i:FindFirstChild("Handle") then
				local h = i.Handle
				if not OriginalAssets[v.Name][h] then OriginalAssets[v.Name][h] = {Color = h.Color, Material = h.Material, Texture = nil, Transparency = h.Transparency} end
				
				h.Color = Color3.fromRGB(150,150,150)
				h.Material = Enum.Material.SmoothPlastic
				
				if h:IsA("MeshPart") then
                    if h.TextureID ~= "" then
					    OriginalAssets[v.Name][h].Texture = h.TextureID
					    h.TextureID = ""
                    end
				elseif h:FindFirstChild("SpecialMesh") then
                    if h.SpecialMesh.TextureId ~= "" then
					    OriginalAssets[v.Name][h].Texture = h.SpecialMesh.TextureId
					    h.SpecialMesh.TextureId = ""
                    end
				end
			elseif i:IsA("Clothing") or i:IsA("ShirtGraphic") then 
                if not OriginalAssets[v.Name][i] then OriginalAssets[v.Name][i] = {} end
				if i:IsA("Clothing") then
					if i[i:IsA("Shirt") and "ShirtTemplate" or "PantsTemplate"] ~= "" then
                        if not OriginalAssets[v.Name][i].Template then 
                            OriginalAssets[v.Name][i].Template = i[i:IsA("Shirt") and "ShirtTemplate" or "PantsTemplate"] 
                        end
					    i[i:IsA("Shirt") and "ShirtTemplate" or "PantsTemplate"] = ""
                    end
				end
			end
		end
	end

	local function RestoreOutfits(v)
		if not v or not OriginalAssets[v.Name] then return end
		local data = OriginalAssets[v.Name]
		
		for obj, props in pairs(data) do
			if obj and obj.Parent then 
				if props.Color then obj.Color = props.Color end
				if props.Material then obj.Material = props.Material end
				if props.Transparency then obj.Transparency = props.Transparency end
				if props.Texture ~= nil then
					if obj:IsA("MeshPart") then obj.TextureID = props.Texture
					elseif obj:FindFirstChild("SpecialMesh") then obj.SpecialMesh.TextureId = props.Texture end
				end
				if props.Template then 
					obj[obj:IsA("Shirt") and "ShirtTemplate" or "PantsTemplate"] = props.Template
				end
			end
		end
		OriginalAssets[v.Name] = nil 
	end

	Library:CreateToggle(LegitPage, "Gray characters", false, function(state)
        isGrayEnabled = state
        ActiveFeatures.GrayChars = state
		if state then
			for _, player in ipairs(Players:GetPlayers()) do task.spawn(function() GreyOutfits(player) end) end
			
			greyConnection = Players.PlayerAdded:Connect(function(player)
				player.CharacterAdded:Connect(function() 
                    if isGrayEnabled then
                        task.wait(1)
                        GreyOutfits(player) 
                    end
                end)
			end)
            for _, player in ipairs(Players:GetPlayers()) do
                if not player.Character then
                    player.CharacterAdded:Connect(function()
                        if isGrayEnabled then
                            task.wait(1)
                            GreyOutfits(player)
                        end
                    end)
                end
            end
		else
			if greyConnection then greyConnection:Disconnect(); greyConnection = nil end
			for _, player in ipairs(Players:GetPlayers()) do task.spawn(function() RestoreOutfits(player) end) end
		end
	end)

	Library:CreateToggle(LegitPage, "stretch screen", false, function(state)
		if state then
			getgenv().Resolution = {[".gg/scripters"] = 0.65}
			local Camera = workspace.CurrentCamera
			stretchConnection = game:GetService("RunService").RenderStepped:Connect(function()
				Camera.CFrame = Camera.CFrame * CFrame.new(0, 0, 0, 1, 0, 0, 0, getgenv().Resolution[".gg/scripters"], 0, 0, 0, 1)
			end)
		else
			if stretchConnection then stretchConnection:Disconnect(); stretchConnection = nil end
			local Camera = workspace.CurrentCamera
			getgenv().Resolution = {[".gg/scripters"] = 1} 
		end
	end)

	Library:CreateToggle(LegitPage, "Remove Your Steps", false, function(state)
		LegitSettings.MuteSteps = state
		if state then
			if LocalPlayer.Character then ProcessCharacter(LocalPlayer.Character) end
		else
			if LocalPlayer.Character then ProcessCharacter(LocalPlayer.Character) end
		end
	end)

	Library:CreateToggle(LegitPage, "Remove Your Jumps", false, function(state)
		LegitSettings.MuteJumps = state
		if state then
			if LocalPlayer.Character then ProcessCharacter(LocalPlayer.Character) end
		else
			if LocalPlayer.Character then ProcessCharacter(LocalPlayer.Character) end
		end
	end)

	Library:CreateToggle(LegitPage, "Remove Fog", false, function(state)
		local lighting = game:GetService("Lighting")
		local atmosphere = lighting:FindFirstChildOfClass("Atmosphere")
		
		if not atmosphere then return end

		if state then
			fogRestore.Color = atmosphere.Color
			fogRestore.Glare = atmosphere.Glare
			fogRestore.Haze = atmosphere.Haze
			fogRestore.Decay = atmosphere.Decay
			fogRestore.Density = atmosphere.Density
			fogRestore.Offset = atmosphere.Offset
			
			atmosphere.Color = Color3.fromRGB(0, 0, 0)
			atmosphere.Glare = 0
			atmosphere.Haze = 2.46
			atmosphere.Decay = Color3.fromRGB(0, 0, 0)
			atmosphere.Density = 0.75
			atmosphere.Offset = 0
		else
			if fogRestore.Color then
				atmosphere.Color = fogRestore.Color
				atmosphere.Glare = fogRestore.Glare
				atmosphere.Haze = fogRestore.Haze
				atmosphere.Decay = fogRestore.Decay
				atmosphere.Density = fogRestore.Density
				atmosphere.Offset = fogRestore.Offset
			end
		end
	end)

	local HACK_KEYWORDS = {"keyboard", "typing", "type", "hack", "key"}
	local function isHackSound(sound) local name = sound.Name:lower(); for _, keyword in ipairs(HACK_KEYWORDS) do if name:find(keyword) then return true end end return false end
	local function isFromComputer(sound) local parent = sound.Parent; while parent do if parent.Name == "ComputerTable" then return true end; parent = parent.Parent end return false end
	local function muteHack(sound) sound.Volume = 0; local sig = sound:GetPropertyChangedSignal("Volume"):Connect(function() sound.Volume = 0 end); table.insert(hackSignals, {Signal = sig, Object = sound}) end

	Library:CreateToggle(LegitPage, "Remove Pc Hack Sounds", false, function(state)
		if state then
			for _, obj in ipairs(Workspace:GetDescendants()) do if obj:IsA("Sound") and isHackSound(obj) and isFromComputer(obj) then muteHack(obj) end end
			hackConnection = Workspace.DescendantAdded:Connect(function(obj) if obj:IsA("Sound") then if isHackSound(obj) and isFromComputer(obj) then muteHack(obj) end end end)
		else
			if hackConnection then hackConnection:Disconnect(); hackConnection = nil end
			for _, data in ipairs(hackSignals) do if data.Signal then data.Signal:Disconnect() end; if data.Object then data.Object.Volume = 0.5 end end
			hackSignals = {}
		end
	end)
end

local MapState = {
	OriginalData = {},
	CurrentMode = nil,
	Toggles = {},
	Connection = nil 
}

local function SaveMap()
	if next(MapState.OriginalData) then return end
	local count = 0
	for _, v in pairs(Workspace:GetDescendants()) do
		if v:IsA("BasePart") then
			MapState.OriginalData[v] = {Mat = v.Material, Col = v.Color, Transparency = v.Transparency}
		elseif v:IsA("Texture") or v:IsA("Decal") then
			MapState.OriginalData[v] = {Transparency = v.Transparency}
		end
		count = count + 1
		if count % 200 == 0 then RunService.Heartbeat:Wait() end 
	end
end

local function RestoreMap()
	local count = 0
	for v, data in pairs(MapState.OriginalData) do
		if v and v.Parent then
			if v:IsA("BasePart") then
				v.Material = data.Mat
				v.Color = data.Col
				v.Transparency = data.Transparency
			elseif v:IsA("Texture") or v:IsA("Decal") then
				v.Transparency = data.Transparency
			end
		end
		count = count + 1
		if count % 200 == 0 then RunService.Heartbeat:Wait() end 
	end
	pcall(function() MaterialService.Use2022Materials = false end)
end

local function AutoApplyMap(child)
	if not child:IsA("BasePart") then return end
	if MapState.CurrentMode == "Snow" then
		local IgnoreNames = {ComputerTable = true, ExitDoor = true}
		if child.Anchored and not IgnoreNames[child.Name] then
			child.Material = Enum.Material.Snow
			child.Color = Color3.fromRGB(255, 255, 255)
		end
	elseif MapState.CurrentMode == "NoTexture" then
		if not child:IsA("Terrain") then child.Material = Enum.Material.SmoothPlastic end
	elseif MapState.CurrentMode == "Corroded" then
		child.Material = Enum.Material.CorrodedMetal
		child.Color = Color3.fromRGB(40, 40, 40)
	elseif MapState.CurrentMode == "WhiteBricks" then
		child.Material = Enum.Material.Brick
		child.Color = Color3.fromRGB(255,255,255)
	end
end

local function HandleMapToggle(modeName, state, applyFunc)
	if state then
        ActiveFeatures.MapMode = modeName
		for name, toggle in pairs(MapState.Toggles) do
			if name ~= modeName then
				toggle.Set(false)
			end
		end
		
		task.spawn(function()
			SaveMap()
			RestoreMap()
			MapState.CurrentMode = modeName
			applyFunc() 
			
			if MapState.Connection then MapState.Connection:Disconnect() end
			if modeName ~= "UltraHD" then 
				MapState.Connection = Workspace.DescendantAdded:Connect(AutoApplyMap)
			end
		end)
	else
        if ActiveFeatures.MapMode == modeName then ActiveFeatures.MapMode = nil end
		if MapState.CurrentMode == modeName then
			task.spawn(function()
				RestoreMap()
				if MapState.Connection then MapState.Connection:Disconnect() end
				MapState.CurrentMode = nil
			end)
		end
	end
end

local function ApplyUltraHD()
	local function createMaterial(name, baseMaterial, colorMap, normalMap, roughnessMap)
		local Mat = Instance.new("MaterialVariant")
		Mat.Name = name .. "_TextureOnly"
		Mat.BaseMaterial = baseMaterial
		Mat.ColorMap = colorMap
		Mat.NormalMap = normalMap
		Mat.RoughnessMap = roughnessMap
		Mat.Parent = MaterialService
		pcall(function() MaterialService:SetBaseMaterialOverride(baseMaterial, Mat) end)
	end
	createMaterial("Concrete", Enum.Material.Concrete, "rbxassetid://6223521473", "rbxassetid://6223521257", "rbxassetid://6223521360")
	createMaterial("Brick", Enum.Material.Brick, "rbxassetid://6396996328", "rbxassetid://6396996024", "rbxassetid://6396996160")
	createMaterial("Wood", Enum.Material.Wood, "rbxassetid://924320031", "rbxassetid://924320256", "rbxassetid://924305001")
	createMaterial("WoodPlanks", Enum.Material.WoodPlanks, "rbxassetid://924320031", "rbxassetid://924320256", "rbxassetid://924305001")
	pcall(function() MaterialService.Use2022Materials = true end)
end

local function ApplyNoTexture()
	local count = 0
	for i, v in pairs(Workspace:GetDescendants()) do
		if v:IsA("BasePart") and not v:IsA("Terrain") then
			v.Material = Enum.Material.SmoothPlastic
		elseif v:IsA("Texture") or v:IsA("Decal") then
			v.Transparency = 1 
		end
		count = count + 1
		if count % 200 == 0 then task.wait() end
	end
end

local function ApplySnow()
	local SnowColor = Color3.fromRGB(255, 255, 255)
	local SnowMaterial = Enum.Material.Snow
	local IgnoreNames = {ComputerTable = true, ExitDoor = true}
	local count = 0
	for _, part in pairs(Workspace:GetDescendants()) do
		if part:IsA("BasePart") and part.Anchored and not IgnoreNames[part.Name] then
			part.Material = SnowMaterial
			part.Color = SnowColor
		end
		count = count + 1
		if count % 200 == 0 then task.wait() end
	end
end

local function ApplyCorroded()
	local count = 0
	for _, part in ipairs(Workspace:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Material = Enum.Material.CorrodedMetal
			part.Color = Color3.fromRGB(40, 40, 40)
		end
		count = count + 1
		if count % 200 == 0 then task.wait() end
	end
end

local function ApplyWhiteBricks()
	local count = 0
	for _, part in ipairs(Workspace:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Material = Enum.Material.Brick
			part.Color = Color3.fromRGB(255,255,255)
		end
		count = count + 1
		if count % 200 == 0 then task.wait() end
	end
end

MapState.Toggles["UltraHD"] = Library:CreateToggle(MapPage, "Ultra graphics", false, function(state) HandleMapToggle("UltraHD", state, ApplyUltraHD) end)
MapState.Toggles["NoTexture"] = Library:CreateToggle(MapPage, "Remove Textures", false, function(state) HandleMapToggle("NoTexture", state, ApplyNoTexture) end)
MapState.Toggles["Snow"] = Library:CreateToggle(MapPage, "Snow Map", false, function(state) HandleMapToggle("Snow", state, ApplySnow) end)
MapState.Toggles["Corroded"] = Library:CreateToggle(MapPage, "Corroded Map", false, function(state) HandleMapToggle("Corroded", state, ApplyCorroded) end)
MapState.Toggles["WhiteBricks"] = Library:CreateToggle(MapPage, "WhiteBricks Map", false, function(state) HandleMapToggle("WhiteBricks", state, ApplyWhiteBricks) end)

local function ReapplyActiveSettings()
    task.wait(3)
    if ActiveFeatures.HideLeaves then ToggleHideLeaves(true) end
    if ActiveFeatures.EspPlayers then TogglePlayerESP(true) end
    if ActiveFeatures.EspPods then TogglePodESP(true) end
    if ActiveFeatures.EspDoors then ToggleDoorESP(true, "Door", VisualLogic.Doors.List, "Doors", ESP_COLORS.Door) end
    if ActiveFeatures.EspExits then ToggleDoorESP(true, "ExitDoor", VisualLogic.Exits.List, "Exits", ESP_COLORS.Exit) end
    if ActiveFeatures.EspComputers then ToggleComputerESP(true) end
    if ActiveFeatures.GrayChars then 
        for _, p in pairs(Players:GetPlayers()) do task.spawn(function() GreyOutfits(p) end) end 
    end
    if ActiveFeatures.MapMode then
        if ActiveFeatures.MapMode == "UltraHD" then ApplyUltraHD()
        elseif ActiveFeatures.MapMode == "NoTexture" then ApplyNoTexture()
        elseif ActiveFeatures.MapMode == "Snow" then ApplySnow()
        elseif ActiveFeatures.MapMode == "Corroded" then ApplyCorroded()
        elseif ActiveFeatures.MapMode == "WhiteBricks" then ApplyWhiteBricks() end
    end
end

Workspace.ChildAdded:Connect(function(child)
    if child:IsA("Model") then 
        ReapplyActiveSettings()
    end
end)

local CursorList = {
	{Name = "Default", ID = "RESET"},
	{Name = "Use Cursor", ID = "15368174199"}, {Name = "Use Cursor", ID = "12701650945"}, {Name = "Use Cursor", ID = "128514706094926"},
	{Name = "Use Cursor", ID = "119350232226515"}, {Name = "Use Cursor", ID = "5060823578"}, {Name = "Use Cursor", ID = "9896571799"},
	{Name = "Use Cursor", ID = "139654963330788"}, {Name = "Use Cursor", ID = "13441649168"}, {Name = "Use Cursor", ID = "88005681147215"},
	{Name = "Use Cursor", ID = "72902755839437"}, {Name = "Use Cursor", ID = "128926155948846"}, {Name = "Use Cursor", ID = "95348763251820"},
	{Name = "Use Cursor", ID = "138513473967293"}, {Name = "Use Cursor", ID = "82043397777881"}, {Name = "Use Cursor", ID = "84583215296063"},
	{Name = "Use Cursor", ID = "120058675182639"}, {Name = "Use Cursor", ID = "130210380679877"}, {Name = "Use Cursor", ID = "74264514489577"},
	{Name = "Use Cursor", ID = "115877213393063"}, {Name = "Use Cursor", ID = "133579119074302"}, {Name = "Use Cursor", ID = "137970082797101"},
	{Name = "Use Cursor", ID = "116865736993390"}
}

Library:CreateSection(CrossHairPage, "Settings")
Library:CreateSlider(CrossHairPage, "Cursor Size", 10, 100, 24, UpdateCursorSizes)

Library:CreateSection(CrossHairPage, "Computer Cursor")
Library:CreateCustomIDInput(CrossHairPage, false)
Library:CreateCursorGrid(CrossHairPage, CursorList, false)

Library:CreateSection(CrossHairPage, "Mobile Cursor")
Library:CreateCustomIDInput(CrossHairPage, true)
Library:CreateCursorGrid(CrossHairPage, CursorList, true)

local SoundIDs = {
	Facility = {Walk = "131592620665625", Jump = "89459688918065", Fall = "88947883822456"},
	Noob = {Walk = "110709356093026", Jump = "124276657634407", Fall = "88947883822456"},
	Morcego = {Walk = "97458293386939", Jump = "72503238596964", Fall = "83702883984130"},
	FKPS = {Walk = "97733831736820", Jump = "86031664547378", Fall = "78180192109919"},
	Normal = {Walk = "79392671800290", Jump = "80853972291847", Fall = "88947883822456"},
	Others = {Pew = "136299701781122", Sharingan = "118102230060662", Bubble = "129415490412106", Laugh = "80276851298640"}
}

Library:CreateSection(SoundsPage, "General")
Library:CreateButton(SoundsPage, "Default Sounds (Reset)", function()
	SetSound("Running", "Default", 1.0)
	SetSound("Jumping", "Default", 0.5)
	SetSound("Landing", "Default", 0.5)
end)

Library:CreateSection(SoundsPage, "Facility Gamer")
Library:CreateButton(SoundsPage, "FootSteps", function() SetSound("Running", SoundIDs.Facility.Walk, 1.0) end)
Library:CreateButton(SoundsPage, "Jump", function() SetSound("Jumping", SoundIDs.Facility.Jump, 0.2) end)

Library:CreateSection(SoundsPage, "NoobTwoPoint")
Library:CreateButton(SoundsPage, "FootSteps", function() SetSound("Running", SoundIDs.Noob.Walk, 1.0) end)
Library:CreateButton(SoundsPage, "Jump", function() SetSound("Jumping", SoundIDs.Noob.Jump, 0.2) end)

Library:CreateSection(SoundsPage, "Tio Morcego")
Library:CreateButton(SoundsPage, "FootSteps", function() SetSound("Running", SoundIDs.Morcego.Walk, 1.0) end)
Library:CreateButton(SoundsPage, "Jump", function() SetSound("Jumping", SoundIDs.Morcego.Jump, 0.2) end)
Library:CreateButton(SoundsPage, "Fall", function() SetSound("Landing", SoundIDs.Morcego.Fall, 0.5) end)

Library:CreateSection(SoundsPage, "FKPS")
Library:CreateButton(SoundsPage, "FootSteps", function() SetSound("Running", SoundIDs.FKPS.Walk, 1.0) end)
Library:CreateButton(SoundsPage, "Jumps", function() SetSound("Jumping", SoundIDs.FKPS.Jump, 0.2) end)
Library:CreateButton(SoundsPage, "Fall", function() SetSound("Landing", SoundIDs.FKPS.Fall, 0.5) end)

Library:CreateSection(SoundsPage, "Normal")
Library:CreateButton(SoundsPage, "FootSteps", function() SetSound("Running", SoundIDs.Normal.Walk, 1.0) end)
Library:CreateButton(SoundsPage, "Jump", function() SetSound("Jumping", SoundIDs.Normal.Jump, 0.2) end)
Library:CreateButton(SoundsPage, "Fall", function() SetSound("Landing", SoundIDs.Normal.Fall, 0.5) end)

Library:CreateSection(SoundsPage, "Others")
Library:CreateButton(SoundsPage, "Pew Jump", function() SetSound("Jumping", SoundIDs.Others.Pew, 0.2) end)
Library:CreateButton(SoundsPage, "Sharingan Jump", function() SetSound("Jumping", SoundIDs.Others.Sharingan, 0.2) end)
Library:CreateButton(SoundsPage, "Albino Jump", function() SetSound("Jumping", SoundIDs.Others.Bubble, 0.2) end)
Library:CreateButton(SoundsPage, "Anime Laugh", function() SetSound("Jumping", SoundIDs.Others.Laugh, 0.2) end)


local function UpdateTeleportList()
	for _, child in pairs(TeleportPage:GetChildren()) do if child:IsA("Frame") or child:IsA("TextButton") then child:Destroy() end end
	local RefreshBtn = Instance.new("TextButton"); RefreshBtn.Size = UDim2.new(1, 0, 0, 32); RefreshBtn.BackgroundColor3 = Theme.ItemStroke; RefreshBtn.Text = "Refresh"; RefreshBtn.TextColor3 = Theme.Accent; RefreshBtn.Font = Theme.Font; RefreshBtn.TextSize = 13; RefreshBtn.Parent = TeleportPage; Instance.new("UICorner", RefreshBtn).CornerRadius = UDim.new(0, 6)
	RefreshBtn.MouseButton1Click:Connect(function() UpdateTeleportList() end)
	local Spacer = Instance.new("Frame"); Spacer.Size = UDim2.new(1, 0, 0, 5); Spacer.BackgroundTransparency = 1; Spacer.Parent = TeleportPage
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			Library:CreatePlayerCard(TeleportPage, player, function()
				if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
					LocalPlayer.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame + Vector3.new(0, 2, 0)
				end
			end)
		end
	end
end
UpdateTeleportList()
Players.PlayerAdded:Connect(UpdateTeleportList); Players.PlayerRemoving:Connect(UpdateTeleportList)

if tabs[1] then tabs[1].Page.Visible = true; tabs[1].Indicator.BackgroundTransparency = 0; tabs[1].Label.TextColor3 = Theme.Accent; tabs[1].Icon.ImageColor3 = Theme.Accent end
